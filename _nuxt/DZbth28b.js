import{f as ze,av as At,V as ye,bc as Wt,bd as Nt,o as oe,c as he,a as j,x as Oe,v as N,b as Q,t as Ae,aw as _t,ax as Vt,ay as it,_ as jt,aA as Qt,Y as gt,O as fe,aG as Le,Q as vt,a7 as Zt,a0 as Be,R as qt,U as nt,T as st,$ as lt,d as xt,r as je,at as Gt,y as Xe,be as Kt,l as ut,a5 as Yt,bf as Xt,bg as Jt,w as ie,aZ as en,a3 as ft,bh as tn,ah as nn,aj as rn,ak as Ut,k as kt,g as on,i as Ct,an,aq as sn,q as ln,N as un,aM as fn,m as ct,ae as Ve,bi as cn,bj as Ft,bk as yt,bl as dn,bm as pn,bn as hn,W as mn,s as gn,bo as vn}from"./cBpJiMAW.js";import{a as yn,_ as bn,u as bt}from"./wydJDnI0.js";import{_ as wn,h as An,i as _n}from"./9TOWEHi3.js";import{g as xn}from"./BbvfABk8.js";import"./DSmPMnkx.js";const Un={wrapper:"w-full flex flex-col gap-2",indicator:{container:{base:"flex flex-row justify-end",width:"min-w-fit",transition:"transition-all"},align:"text-end",width:"w-fit",color:"text-gray-400 dark:text-gray-500",size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base","2xl":"text-base"}},progress:{base:"block appearance-none border-none overflow-hidden",width:"w-full [&::-webkit-progress-bar]:w-full",size:{"2xs":"h-px",xs:"h-0.5",sm:"h-1",md:"h-2",lg:"h-3",xl:"h-4","2xl":"h-5"},rounded:"rounded-full [&::-webkit-progress-bar]:rounded-full",track:"[&::-webkit-progress-bar]:bg-gray-200 [&::-webkit-progress-bar]:dark:bg-gray-700 [@supports(selector(&::-moz-progress-bar))]:bg-gray-200 [@supports(selector(&::-moz-progress-bar))]:dark:bg-gray-700",bar:"[&::-webkit-progress-value]:rounded-full [&::-webkit-progress-value]:transition-all [&::-webkit-progress-value]:ease-in-out [&::-moz-progress-bar]:rounded-full",color:"text-{color}-500 dark:text-{color}-400",background:"[&::-webkit-progress-value]:bg-current [&::-moz-progress-bar]:bg-current",indeterminate:{base:"indeterminate:relative",rounded:"indeterminate:after:rounded-full [&:indeterminate::-webkit-progress-value]:rounded-full [&:indeterminate::-moz-progress-bar]:rounded-full"}},steps:{base:"grid grid-cols-1",color:"text-{color}-500 dark:text-{color}-400",size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base","2xl":"text-base"}},step:{base:"transition-all opacity-0 truncate row-start-1 col-start-1",align:"text-end",active:"opacity-100",first:"text-gray-500 dark:text-gray-400"},animation:{carousel:"bar-animation-carousel","carousel-inverse":"bar-animation-carousel-inverse",swing:"bar-animation-swing",elastic:"bar-animation-elastic"},default:{color:"primary",size:"md",animation:"carousel"}},kn={class:"flex justify-center"},Cn={class:"flex justify-center"},Fn={class:"text-ellipsis whitespace-nowrap"},Mn={class:"text-primary-500 dark:text-primary-400 hover:text-primary-600 dark:hover:text-primary-500 hover:underline hover:underline-offset-2 transition-colors"},Sn=ze({__name:"DropZone",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(m){const b=At(m,"modelValue"),C=new WeakMap,u=v=>{g(v??[])},e=ye(null),{isOverDropZone:t}=Wt(e,u),{open:s,onChange:a}=Nt({accept:"image/*",multiple:!0});a(v=>{g(Array.from(v??[]))});function g(v){v.map(n=>{C.has(n)||(b.value.push(n),C.set(n,!0))})}return(v,n)=>{const o=_t;return oe(),he("div",null,[j("div",{ref_key:"dropZoneRef",ref:e,class:Oe(["border border-dashed rounded-md border-gray-500 hover:border-primary-500 dark:hover:border-primary-400 cursor-pointer w-full h-full place-content-center",N(t)&&"border-2 border-primary-500 dark:border-primary-400 bg-primary-500/5 -m-[1px]"]),onClick:n[0]||(n[0]=r=>N(s)())},[j("div",{class:Oe(["flex flex-col p-10 space-y-2",N(t)&&"translate-x-[1px]"])},[j("div",kn,[Q(o,{name:"i-mingcute-upload-3-line"})]),j("div",Cn,[j("p",Fn,[j("span",null,Ae(v.$t("upload.fileUploader.dropZone.part1")),1),j("span",Mn,Ae(v.$t("upload.fileUploader.dropZone.part2")),1)])])],2)],2)])}}}),De=Vt(it.ui.strategy,it.ui.progress,Un),In=ze({inheritAttrs:!1,props:{value:{type:Number,default:null},max:{type:[Number,Array],default:100},indicator:{type:Boolean,default:!1},animation:{type:String,default:()=>De.default.animation,validator(m){return Object.keys(De.animation).includes(m)}},size:{type:String,default:()=>De.default.size,validator(m){return Object.keys(De.progress.size).includes(m)}},color:{type:String,default:()=>De.default.color,validator(m){return it.ui.colors.includes(m)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(m){const{ui:b,attrs:C}=Qt("progress",gt(m,"ui"),De,gt(m,"class")),u=fe(()=>Le(b.value.indicator.container.base,b.value.indicator.container.width,b.value.indicator.container.transition)),e=fe(()=>Le(b.value.indicator.align,b.value.indicator.width,b.value.indicator.color,b.value.indicator.size[m.size])),t=fe(()=>{var L;const h=[b.value.progress.base,b.value.progress.width,b.value.progress.size[m.size],b.value.progress.rounded,b.value.progress.track,b.value.progress.bar,(L=b.value.progress.color)==null?void 0:L.replaceAll("{color}",m.color),b.value.progress.background,b.value.progress.indeterminate.base,b.value.progress.indeterminate.rounded];return i.value&&h.push(b.value.animation[m.animation]),Le(...h)}),s=fe(()=>{var h;return Le(b.value.steps.base,(h=b.value.steps.color)==null?void 0:h.replaceAll("{color}",m.color),b.value.steps.size[m.size])}),a=fe(()=>Le(b.value.step.base,b.value.step.align)),g=fe(()=>Le(b.value.step.active)),v=fe(()=>Le(b.value.step.first));function n(h){return h===Number(m.value)}function o(h){return h===0}function r(h){h=Number(h);const L=[a.value];return o(h)&&L.push(v.value),n(h)&&L.push(g.value),L.join(" ")}const i=fe(()=>m.value===void 0||m.value===null),p=fe(()=>Array.isArray(m.max)),w=fe(()=>i.value?null:Array.isArray(m.max)?m.max.length-1:Number(m.max)),S=fe(()=>{if(!i.value)switch(!0){case m.value<0:return 0;case m.value>w.value:return 100;default:return m.value/w.value*100}});return{ui:b,attrs:C,indicatorContainerClass:u,indicatorClass:e,progressClass:t,stepsClass:s,stepClasses:r,isIndeterminate:i,isSteps:p,realMax:w,percent:S}}}),En=["aria-valuemax","aria-valuenow"];function Tn(m,b,C,u,e,t){return oe(),he("div",{class:Oe(m.ui.wrapper),role:"progressbar"},[m.indicator||m.$slots.indicator?vt(m.$slots,"indicator",qt(nt({key:0},{percent:m.percent})),()=>[m.isSteps?Be("",!0):(oe(),he("div",{key:0,class:Oe(m.indicatorContainerClass),style:Zt({width:`${m.percent}%`})},[j("div",{class:Oe(m.indicatorClass)},Ae(Math.round(m.percent))+"% ",3)],6))],!0):Be("",!0),j("progress",nt({"aria-valuemax":m.realMax,"aria-valuenow":m.value,class:m.progressClass},{value:m.value,max:m.realMax,...m.attrs}),Ae(m.percent!==void 0?`${Math.round(m.percent)}%`:void 0),17,En),m.isSteps?(oe(),he("div",{key:1,class:Oe(m.stepsClass)},[(oe(!0),he(st,null,lt(m.max,(s,a)=>(oe(),he("div",{key:a,class:Oe(m.stepClasses(a))},[vt(m.$slots,`step-${a}`,nt({ref_for:!0},{step:s}),()=>[xt(Ae(s),1)],!0)],2))),128))],2)):Be("",!0)],2)}const Rn=jt(In,[["render",Tn],["__scopeId","data-v-af018fe7"]]),Ln={class:"flex flex-col gap-2"},On={class:"text-sm items-center inline-flex"},$n=["title"],zn={class:"text-sm items-center inline-flex"},Pn={key:1,class:"truncate block"},Dn=ze({__name:"UploadPreviewInfo",props:{keyStr:{},processedSize:{}},emits:["processFile"],setup(m){const b=ye(!1);return(C,u)=>{const e=Gt,t=yn,s=Xe;return oe(),he("div",Ln,[j("p",On,[Q(e,{name:"i-mingcute-key-2-line",class:"shrink-0 mr-2"}),j("span",{title:C.keyStr,class:"truncate block"}," Upload Path: "+Ae(C.keyStr),9,$n)]),j("p",zn,[Q(e,{name:"i-mingcute-file-line",class:"shrink-0 mr-2"}),u[1]||(u[1]=j("span",null,"Processed Size:Â ",-1)),N(b)?(oe(),je(t,{key:0,class:"w-12 h-5"})):(oe(),he("span",Pn,Ae(C.processedSize===void 0?"??":C.processedSize),1)),Q(s,{icon:"i-mingcute-refresh-2-line",variant:"link",size:"xs",onClick:u[0]||(u[0]=a=>{b.value=!0,C.$emit("processFile",()=>{b.value=!1})})})])])}}}),Hn=m=>{const b=m===0?0:Math.floor(Math.log(m)/Math.log(1024));return(m/Math.pow(1024,b)).toFixed(2)+" "+["B","KB","MB","GB","TB"][b]};function Bn(m,b){return b.forEach(function(C){C&&typeof C!="string"&&!Array.isArray(C)&&Object.keys(C).forEach(function(u){if(u!=="default"&&!(u in m)){var e=Object.getOwnPropertyDescriptor(C,u);Object.defineProperty(m,u,e.get?e:{enumerable:!0,get:function(){return C[u]}})}})}),Object.freeze(m)}function Mt(m,b){return new Promise(function(C,u){let e;return Wn(m).then(function(t){try{return e=t,C(new Blob([b.slice(0,2),e,b.slice(2)],{type:"image/jpeg"}))}catch(s){return u(s)}},u)})}const Wn=m=>new Promise((b,C)=>{const u=new FileReader;u.addEventListener("load",({target:{result:e}})=>{const t=new DataView(e);let s=0;if(t.getUint16(s)!==65496)return C("not a valid JPEG");for(s+=2;;){const a=t.getUint16(s);if(a===65498)break;const g=t.getUint16(s+2);if(a===65505&&t.getUint32(s+4)===1165519206){const v=s+10;let n;switch(t.getUint16(v)){case 18761:n=!0;break;case 19789:n=!1;break;default:return C("TIFF header contains invalid endian")}if(t.getUint16(v+2,n)!==42)return C("TIFF header contains invalid version");const o=t.getUint32(v+4,n),r=v+o+2+12*t.getUint16(v+o,n);for(let i=v+o+2;i<r;i+=12)if(t.getUint16(i,n)==274){if(t.getUint16(i+2,n)!==3)return C("Orientation data type is invalid");if(t.getUint32(i+4,n)!==1)return C("Orientation data count is invalid");t.setUint16(i+8,1,n);break}return b(e.slice(s,s+2+g))}s+=2+g}return b(new Blob)}),u.readAsArrayBuffer(m)});var qe={},Nn={get exports(){return qe},set exports(m){qe=m}};(function(m){var b,C,u={};Nn.exports=u,u.parse=function(e,t){for(var s=u.bin.readUshort,a=u.bin.readUint,g=0,v={},n=new Uint8Array(e),o=n.length-4;a(n,o)!=101010256;)o--;g=o,g+=4;var r=s(n,g+=4);s(n,g+=2);var i=a(n,g+=2),p=a(n,g+=4);g+=4,g=p;for(var w=0;w<r;w++){a(n,g),g+=4,g+=4,g+=4,a(n,g+=4),i=a(n,g+=4);var S=a(n,g+=4),h=s(n,g+=4),L=s(n,g+2),E=s(n,g+4);g+=6;var I=a(n,g+=8);g+=4,g+=h+L+E,u._readLocal(n,I,v,i,S,t)}return v},u._readLocal=function(e,t,s,a,g,v){var n=u.bin.readUshort,o=u.bin.readUint;o(e,t),n(e,t+=4),n(e,t+=2);var r=n(e,t+=2);o(e,t+=2),o(e,t+=4),t+=4;var i=n(e,t+=8),p=n(e,t+=2);t+=2;var w=u.bin.readUTF8(e,t,i);if(t+=i,t+=p,v)s[w]={size:g,csize:a};else{var S=new Uint8Array(e.buffer,t);if(r==0)s[w]=new Uint8Array(S.buffer.slice(t,t+a));else{if(r!=8)throw"unknown compression method: "+r;var h=new Uint8Array(g);u.inflateRaw(S,h),s[w]=h}}},u.inflateRaw=function(e,t){return u.F.inflate(e,t)},u.inflate=function(e,t){return e[0],e[1],u.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},u.deflate=function(e,t){t==null&&(t={level:6});var s=0,a=new Uint8Array(50+Math.floor(1.1*e.length));a[s]=120,a[s+1]=156,s+=2,s=u.F.deflateRaw(e,a,s,t.level);var g=u.adler(e,0,e.length);return a[s+0]=g>>>24&255,a[s+1]=g>>>16&255,a[s+2]=g>>>8&255,a[s+3]=g>>>0&255,new Uint8Array(a.buffer,0,s+4)},u.deflateRaw=function(e,t){t==null&&(t={level:6});var s=new Uint8Array(50+Math.floor(1.1*e.length)),a=u.F.deflateRaw(e,s,a,t.level);return new Uint8Array(s.buffer,0,a)},u.encode=function(e,t){t==null&&(t=!1);var s=0,a=u.bin.writeUint,g=u.bin.writeUshort,v={};for(var n in e){var o=!u._noNeed(n)&&!t,r=e[n],i=u.crc.crc(r,0,r.length);v[n]={cpr:o,usize:r.length,crc:i,file:o?u.deflateRaw(r):r}}for(var n in v)s+=v[n].file.length+30+46+2*u.bin.sizeUTF8(n);s+=22;var p=new Uint8Array(s),w=0,S=[];for(var n in v){var h=v[n];S.push(w),w=u._writeHeader(p,w,n,h,0)}var L=0,E=w;for(var n in v)h=v[n],S.push(w),w=u._writeHeader(p,w,n,h,1,S[L++]);var I=w-E;return a(p,w,101010256),w+=4,g(p,w+=4,L),g(p,w+=2,L),a(p,w+=2,I),a(p,w+=4,E),w+=4,w+=2,p.buffer},u._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},u._writeHeader=function(e,t,s,a,g,v){var n=u.bin.writeUint,o=u.bin.writeUshort,r=a.file;return n(e,t,g==0?67324752:33639248),t+=4,g==1&&(t+=2),o(e,t,20),o(e,t+=2,0),o(e,t+=2,a.cpr?8:0),n(e,t+=2,0),n(e,t+=4,a.crc),n(e,t+=4,r.length),n(e,t+=4,a.usize),o(e,t+=4,u.bin.sizeUTF8(s)),o(e,t+=2,0),t+=2,g==1&&(t+=2,t+=2,n(e,t+=6,v),t+=4),t+=u.bin.writeUTF8(e,t,s),g==0&&(e.set(r,t),t+=r.length),t},u.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var s=t,a=0;a<8;a++)1&s?s=3988292384^s>>>1:s>>>=1;e[t]=s}return e}(),update:function(e,t,s,a){for(var g=0;g<a;g++)e=u.crc.table[255&(e^t[s+g])]^e>>>8;return e},crc:function(e,t,s){return 4294967295^u.crc.update(4294967295,e,t,s)}},u.adler=function(e,t,s){for(var a=1,g=0,v=t,n=t+s;v<n;){for(var o=Math.min(v+5552,n);v<o;)g+=a+=e[v++];a%=65521,g%=65521}return g<<16|a},u.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,s){e[t]=255&s,e[t+1]=s>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,s){e[t]=255&s,e[t+1]=s>>8&255,e[t+2]=s>>16&255,e[t+3]=s>>24&255},readASCII:function(e,t,s){for(var a="",g=0;g<s;g++)a+=String.fromCharCode(e[t+g]);return a},writeASCII:function(e,t,s){for(var a=0;a<s.length;a++)e[t+a]=s.charCodeAt(a)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,s){for(var a,g="",v=0;v<s;v++)g+="%"+u.bin.pad(e[t+v].toString(16));try{a=decodeURIComponent(g)}catch{return u.bin.readASCII(e,t,s)}return a},writeUTF8:function(e,t,s){for(var a=s.length,g=0,v=0;v<a;v++){var n=s.charCodeAt(v);if(!(4294967168&n))e[t+g]=n,g++;else if(!(4294965248&n))e[t+g]=192|n>>6,e[t+g+1]=128|n>>0&63,g+=2;else if(!(4294901760&n))e[t+g]=224|n>>12,e[t+g+1]=128|n>>6&63,e[t+g+2]=128|n>>0&63,g+=3;else{if(4292870144&n)throw"e";e[t+g]=240|n>>18,e[t+g+1]=128|n>>12&63,e[t+g+2]=128|n>>6&63,e[t+g+3]=128|n>>0&63,g+=4}}return g},sizeUTF8:function(e){for(var t=e.length,s=0,a=0;a<t;a++){var g=e.charCodeAt(a);if(!(4294967168&g))s++;else if(!(4294965248&g))s+=2;else if(!(4294901760&g))s+=3;else{if(4292870144&g)throw"e";s+=4}}return s}},u.F={},u.F.deflateRaw=function(e,t,s,a){var g=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],v=u.F.U,n=u.F._goodIndex;u.F._hash;var o=u.F._putsE,r=0,i=s<<3,p=0,w=e.length;if(a==0){for(;r<w;)o(t,i,r+(U=Math.min(65535,w-r))==w?1:0),i=u.F._copyExact(e,r,U,t,i+8),r+=U;return i>>>3}var S=v.lits,h=v.strt,L=v.prev,E=0,I=0,$=0,y=0,R=0,c=0;for(w>2&&(h[c=u.F._hash(e,0)]=0),r=0;r<w;r++){if(R=c,r+1<w-2){c=u.F._hash(e,r+1);var f=r+1&32767;L[f]=h[c],h[c]=f}if(p<=r){(E>14e3||I>26697)&&w-r>100&&(p<r&&(S[E]=r-p,E+=2,p=r),i=u.F._writeBlock(r==w-1||p==w?1:0,S,E,y,e,$,r-$,t,i),E=I=y=0,$=r);var _=0;r<w-2&&(_=u.F._bestMatch(e,r,L,R,Math.min(g[2],w-r),g[3]));var U=_>>>16,x=65535&_;if(_!=0){x=65535&_;var k=n(U=_>>>16,v.of0);v.lhst[257+k]++;var A=n(x,v.df0);v.dhst[A]++,y+=v.exb[k]+v.dxb[A],S[E]=U<<23|r-p,S[E+1]=x<<16|k<<8|A,E+=2,p=r+U}else v.lhst[e[r]]++;I++}}for($==r&&e.length!=0||(p<r&&(S[E]=r-p,E+=2,p=r),i=u.F._writeBlock(1,S,E,y,e,$,r-$,t,i),E=0,I=0,E=I=y=0,$=r);7&i;)i++;return i>>>3},u.F._bestMatch=function(e,t,s,a,g,v){var n=32767&t,o=s[n],r=n-o+32768&32767;if(o==n||a!=u.F._hash(e,t-r))return 0;for(var i=0,p=0,w=Math.min(32767,t);r<=w&&--v!=0&&o!=n;){if(i==0||e[t+i]==e[t+i-r]){var S=u.F._howLong(e,t,r);if(S>i){if(p=r,(i=S)>=g)break;r+2<S&&(S=r+2);for(var h=0,L=0;L<S-2;L++){var E=t-r+L+32768&32767,I=E-s[E]+32768&32767;I>h&&(h=I,o=E)}}}r+=(n=o)-(o=s[n])+32768&32767}return i<<16|p},u.F._howLong=function(e,t,s){if(e[t]!=e[t-s]||e[t+1]!=e[t+1-s]||e[t+2]!=e[t+2-s])return 0;var a=t,g=Math.min(e.length,t+258);for(t+=3;t<g&&e[t]==e[t-s];)t++;return t-a},u.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},u.saved=0,u.F._writeBlock=function(e,t,s,a,g,v,n,o,r){var i,p,w,S,h,L,E,I,$,y=u.F.U,R=u.F._putsF,c=u.F._putsE;y.lhst[256]++,p=(i=u.F.getTrees())[0],w=i[1],S=i[2],h=i[3],L=i[4],E=i[5],I=i[6],$=i[7];var f=32+(r+3&7?8-(r+3&7):0)+(n<<3),_=a+u.F.contSize(y.fltree,y.lhst)+u.F.contSize(y.fdtree,y.dhst),U=a+u.F.contSize(y.ltree,y.lhst)+u.F.contSize(y.dtree,y.dhst);U+=14+3*E+u.F.contSize(y.itree,y.ihst)+(2*y.ihst[16]+3*y.ihst[17]+7*y.ihst[18]);for(var x=0;x<286;x++)y.lhst[x]=0;for(x=0;x<30;x++)y.dhst[x]=0;for(x=0;x<19;x++)y.ihst[x]=0;var k=f<_&&f<U?0:_<U?1:2;if(R(o,r,e),R(o,r+1,k),r+=3,k==0){for(;7&r;)r++;r=u.F._copyExact(g,v,n,o,r)}else{var A,M;if(k==1&&(A=y.fltree,M=y.fdtree),k==2){u.F.makeCodes(y.ltree,p),u.F.revCodes(y.ltree,p),u.F.makeCodes(y.dtree,w),u.F.revCodes(y.dtree,w),u.F.makeCodes(y.itree,S),u.F.revCodes(y.itree,S),A=y.ltree,M=y.dtree,c(o,r,h-257),c(o,r+=5,L-1),c(o,r+=5,E-4),r+=4;for(var d=0;d<E;d++)c(o,r+3*d,y.itree[1+(y.ordr[d]<<1)]);r+=3*E,r=u.F._codeTiny(I,y.itree,o,r),r=u.F._codeTiny($,y.itree,o,r)}for(var l=v,O=0;O<s;O+=2){for(var F=t[O],z=F>>>23,B=l+(8388607&F);l<B;)r=u.F._writeLit(g[l++],A,o,r);if(z!=0){var D=t[O+1],H=D>>16,P=D>>8&255,T=255&D;c(o,r=u.F._writeLit(257+P,A,o,r),z-y.of0[P]),r+=y.exb[P],R(o,r=u.F._writeLit(T,M,o,r),H-y.df0[T]),r+=y.dxb[T],l+=z}}r=u.F._writeLit(256,A,o,r)}return r},u.F._copyExact=function(e,t,s,a,g){var v=g>>>3;return a[v]=s,a[v+1]=s>>>8,a[v+2]=255-a[v],a[v+3]=255-a[v+1],v+=4,a.set(new Uint8Array(e.buffer,t,s),v),g+(s+4<<3)},u.F.getTrees=function(){for(var e=u.F.U,t=u.F._hufTree(e.lhst,e.ltree,15),s=u.F._hufTree(e.dhst,e.dtree,15),a=[],g=u.F._lenCodes(e.ltree,a),v=[],n=u.F._lenCodes(e.dtree,v),o=0;o<a.length;o+=2)e.ihst[a[o]]++;for(o=0;o<v.length;o+=2)e.ihst[v[o]]++;for(var r=u.F._hufTree(e.ihst,e.itree,7),i=19;i>4&&e.itree[1+(e.ordr[i-1]<<1)]==0;)i--;return[t,s,r,g,n,i,a,v]},u.F.getSecond=function(e){for(var t=[],s=0;s<e.length;s+=2)t.push(e[s+1]);return t},u.F.nonZero=function(e){for(var t="",s=0;s<e.length;s+=2)e[s+1]!=0&&(t+=(s>>1)+",");return t},u.F.contSize=function(e,t){for(var s=0,a=0;a<t.length;a++)s+=t[a]*e[1+(a<<1)];return s},u.F._codeTiny=function(e,t,s,a){for(var g=0;g<e.length;g+=2){var v=e[g],n=e[g+1];a=u.F._writeLit(v,t,s,a);var o=v==16?2:v==17?3:7;v>15&&(u.F._putsE(s,a,n,o),a+=o)}return a},u.F._lenCodes=function(e,t){for(var s=e.length;s!=2&&e[s-1]==0;)s-=2;for(var a=0;a<s;a+=2){var g=e[a+1],v=a+3<s?e[a+3]:-1,n=a+5<s?e[a+5]:-1,o=a==0?-1:e[a-1];if(g==0&&v==g&&n==g){for(var r=a+5;r+2<s&&e[r+2]==g;)r+=2;(i=Math.min(r+1-a>>>1,138))<11?t.push(17,i-3):t.push(18,i-11),a+=2*i-2}else if(g==o&&v==g&&n==g){for(r=a+5;r+2<s&&e[r+2]==g;)r+=2;var i=Math.min(r+1-a>>>1,6);t.push(16,i-3),a+=2*i-2}else t.push(g,0)}return s>>>1},u.F._hufTree=function(e,t,s){var a=[],g=e.length,v=t.length,n=0;for(n=0;n<v;n+=2)t[n]=0,t[n+1]=0;for(n=0;n<g;n++)e[n]!=0&&a.push({lit:n,f:e[n]});var o=a.length,r=a.slice(0);if(o==0)return 0;if(o==1){var i=a[0].lit;return r=i==0?1:0,t[1+(i<<1)]=1,t[1+(r<<1)]=1,1}a.sort(function(I,$){return I.f-$.f});var p=a[0],w=a[1],S=0,h=1,L=2;for(a[0]={lit:-1,f:p.f+w.f,l:p,r:w,d:0};h!=o-1;)p=S!=h&&(L==o||a[S].f<a[L].f)?a[S++]:a[L++],w=S!=h&&(L==o||a[S].f<a[L].f)?a[S++]:a[L++],a[h++]={lit:-1,f:p.f+w.f,l:p,r:w};var E=u.F.setDepth(a[h-1],0);for(E>s&&(u.F.restrictDepth(r,s,E),E=s),n=0;n<o;n++)t[1+(r[n].lit<<1)]=r[n].d;return E},u.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(u.F.setDepth(e.l,t+1),u.F.setDepth(e.r,t+1))},u.F.restrictDepth=function(e,t,s){var a=0,g=1<<s-t,v=0;for(e.sort(function(o,r){return r.d==o.d?o.f-r.f:r.d-o.d}),a=0;a<e.length&&e[a].d>t;a++){var n=e[a].d;e[a].d=t,v+=g-(1<<s-n)}for(v>>>=s-t;v>0;)(n=e[a].d)<t?(e[a].d++,v-=1<<t-n-1):a++;for(;a>=0;a--)e[a].d==t&&v<0&&(e[a].d--,v++);v!=0&&console.log("debt left")},u.F._goodIndex=function(e,t){var s=0;return t[16|s]<=e&&(s|=16),t[8|s]<=e&&(s|=8),t[4|s]<=e&&(s|=4),t[2|s]<=e&&(s|=2),t[1|s]<=e&&(s|=1),s},u.F._writeLit=function(e,t,s,a){return u.F._putsF(s,a,t[e<<1]),a+t[1+(e<<1)]},u.F.inflate=function(e,t){var s=Uint8Array;if(e[0]==3&&e[1]==0)return t||new s(0);var a=u.F,g=a._bitsF,v=a._bitsE,n=a._decodeTiny,o=a.makeCodes,r=a.codes2map,i=a._get17,p=a.U,w=t==null;w&&(t=new s(e.length>>>2<<3));for(var S,h,L=0,E=0,I=0,$=0,y=0,R=0,c=0,f=0,_=0;L==0;)if(L=g(e,_,1),E=g(e,_+1,2),_+=3,E!=0){if(w&&(t=u.F._check(t,f+(1<<17))),E==1&&(S=p.flmap,h=p.fdmap,R=511,c=31),E==2){I=v(e,_,5)+257,$=v(e,_+5,5)+1,y=v(e,_+10,4)+4,_+=14;for(var U=0;U<38;U+=2)p.itree[U]=0,p.itree[U+1]=0;var x=1;for(U=0;U<y;U++){var k=v(e,_+3*U,3);p.itree[1+(p.ordr[U]<<1)]=k,k>x&&(x=k)}_+=3*y,o(p.itree,x),r(p.itree,x,p.imap),S=p.lmap,h=p.dmap,_=n(p.imap,(1<<x)-1,I+$,e,_,p.ttree);var A=a._copyOut(p.ttree,0,I,p.ltree);R=(1<<A)-1;var M=a._copyOut(p.ttree,I,$,p.dtree);c=(1<<M)-1,o(p.ltree,A),r(p.ltree,A,S),o(p.dtree,M),r(p.dtree,M,h)}for(;;){var d=S[i(e,_)&R];_+=15&d;var l=d>>>4;if(!(l>>>8))t[f++]=l;else{if(l==256)break;var O=f+l-254;if(l>264){var F=p.ldef[l-257];O=f+(F>>>3)+v(e,_,7&F),_+=7&F}var z=h[i(e,_)&c];_+=15&z;var B=z>>>4,D=p.ddef[B],H=(D>>>4)+g(e,_,15&D);for(_+=15&D,w&&(t=u.F._check(t,f+(1<<17)));f<O;)t[f]=t[f++-H],t[f]=t[f++-H],t[f]=t[f++-H],t[f]=t[f++-H];f=O}}}else{7&_&&(_+=8-(7&_));var P=4+(_>>>3),T=e[P-4]|e[P-3]<<8;w&&(t=u.F._check(t,f+T)),t.set(new s(e.buffer,e.byteOffset+P,T),f),_=P+T<<3,f+=T}return t.length==f?t:t.slice(0,f)},u.F._check=function(e,t){var s=e.length;if(t<=s)return e;var a=new Uint8Array(Math.max(s<<1,t));return a.set(e,0),a},u.F._decodeTiny=function(e,t,s,a,g,v){for(var n=u.F._bitsE,o=u.F._get17,r=0;r<s;){var i=e[o(a,g)&t];g+=15&i;var p=i>>>4;if(p<=15)v[r]=p,r++;else{var w=0,S=0;p==16?(S=3+n(a,g,2),g+=2,w=v[r-1]):p==17?(S=3+n(a,g,3),g+=3):p==18&&(S=11+n(a,g,7),g+=7);for(var h=r+S;r<h;)v[r]=w,r++}}return g},u.F._copyOut=function(e,t,s,a){for(var g=0,v=0,n=a.length>>>1;v<s;){var o=e[v+t];a[v<<1]=0,a[1+(v<<1)]=o,o>g&&(g=o),v++}for(;v<n;)a[v<<1]=0,a[1+(v<<1)]=0,v++;return g},u.F.makeCodes=function(e,t){for(var s,a,g,v,n=u.F.U,o=e.length,r=n.bl_count,i=0;i<=t;i++)r[i]=0;for(i=1;i<o;i+=2)r[e[i]]++;var p=n.next_code;for(s=0,r[0]=0,a=1;a<=t;a++)s=s+r[a-1]<<1,p[a]=s;for(g=0;g<o;g+=2)(v=e[g+1])!=0&&(e[g]=p[v],p[v]++)},u.F.codes2map=function(e,t,s){for(var a=e.length,g=u.F.U.rev15,v=0;v<a;v+=2)if(e[v+1]!=0)for(var n=v>>1,o=e[v+1],r=n<<4|o,i=t-o,p=e[v]<<i,w=p+(1<<i);p!=w;)s[g[p]>>>15-t]=r,p++},u.F.revCodes=function(e,t){for(var s=u.F.U.rev15,a=15-t,g=0;g<e.length;g+=2){var v=e[g]<<t-e[g+1];e[g]=s[v]>>>a}},u.F._putsE=function(e,t,s){s<<=7&t;var a=t>>>3;e[a]|=s,e[a+1]|=s>>>8},u.F._putsF=function(e,t,s){s<<=7&t;var a=t>>>3;e[a]|=s,e[a+1]|=s>>>8,e[a+2]|=s>>>16},u.F._bitsE=function(e,t,s){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<s)-1},u.F._bitsF=function(e,t,s){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<s)-1},u.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},u.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},u.F.U=(b=Uint16Array,C=Uint32Array,{next_code:new b(16),bl_count:new b(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new b(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new C(32),flmap:new b(512),fltree:[],fdmap:new b(32),fdtree:[],lmap:new b(32768),ltree:[],ttree:[],dmap:new b(32768),dtree:[],imap:new b(512),itree:[],rev15:new b(32768),lhst:new C(286),dhst:new C(30),ihst:new C(19),lits:new C(15e3),strt:new b(65536),prev:new b(32768)}),function(){for(var e=u.F.U,t=0;t<32768;t++){var s=t;s=(4278255360&(s=(4042322160&(s=(3435973836&(s=(2863311530&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,e.rev15[t]=(s>>>16|s<<16)>>>17}function a(g,v,n){for(;v--!=0;)g.push(0,n)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];a(e.fltree,144,8),a(e.fltree,112,9),a(e.fltree,24,7),a(e.fltree,8,8),u.F.makeCodes(e.fltree,9),u.F.codes2map(e.fltree,9,e.flmap),u.F.revCodes(e.fltree,9),a(e.fdtree,32,5),u.F.makeCodes(e.fdtree,5),u.F.codes2map(e.fdtree,5,e.fdmap),u.F.revCodes(e.fdtree,5),a(e.itree,19,0),a(e.ltree,286,0),a(e.dtree,30,0),a(e.ttree,320,0)}()})();var Vn=Bn({__proto__:null,default:qe},[qe]);const we=function(){var m={nextZero(n,o){for(;n[o]!=0;)o++;return o},readUshort:(n,o)=>n[o]<<8|n[o+1],writeUshort(n,o,r){n[o]=r>>8&255,n[o+1]=255&r},readUint:(n,o)=>16777216*n[o]+(n[o+1]<<16|n[o+2]<<8|n[o+3]),writeUint(n,o,r){n[o]=r>>24&255,n[o+1]=r>>16&255,n[o+2]=r>>8&255,n[o+3]=255&r},readASCII(n,o,r){let i="";for(let p=0;p<r;p++)i+=String.fromCharCode(n[o+p]);return i},writeASCII(n,o,r){for(let i=0;i<r.length;i++)n[o+i]=r.charCodeAt(i)},readBytes(n,o,r){const i=[];for(let p=0;p<r;p++)i.push(n[o+p]);return i},pad:n=>n.length<2?`0${n}`:n,readUTF8(n,o,r){let i,p="";for(let w=0;w<r;w++)p+=`%${m.pad(n[o+w].toString(16))}`;try{i=decodeURIComponent(p)}catch{return m.readASCII(n,o,r)}return i}};function b(n,o,r,i){const p=o*r,w=t(i),S=Math.ceil(o*w/8),h=new Uint8Array(4*p),L=new Uint32Array(h.buffer),{ctype:E}=i,{depth:I}=i,$=m.readUshort;if(E==6){const F=p<<2;if(I==8)for(var y=0;y<F;y+=4)h[y]=n[y],h[y+1]=n[y+1],h[y+2]=n[y+2],h[y+3]=n[y+3];if(I==16)for(y=0;y<F;y++)h[y]=n[y<<1]}else if(E==2){const F=i.tabs.tRNS;if(F==null){if(I==8)for(y=0;y<p;y++){var R=3*y;L[y]=255<<24|n[R+2]<<16|n[R+1]<<8|n[R]}if(I==16)for(y=0;y<p;y++)R=6*y,L[y]=255<<24|n[R+4]<<16|n[R+2]<<8|n[R]}else{var c=F[0];const z=F[1],B=F[2];if(I==8)for(y=0;y<p;y++){var f=y<<2;R=3*y,L[y]=255<<24|n[R+2]<<16|n[R+1]<<8|n[R],n[R]==c&&n[R+1]==z&&n[R+2]==B&&(h[f+3]=0)}if(I==16)for(y=0;y<p;y++)f=y<<2,R=6*y,L[y]=255<<24|n[R+4]<<16|n[R+2]<<8|n[R],$(n,R)==c&&$(n,R+2)==z&&$(n,R+4)==B&&(h[f+3]=0)}}else if(E==3){const F=i.tabs.PLTE,z=i.tabs.tRNS,B=z?z.length:0;if(I==1)for(var _=0;_<r;_++){var U=_*S,x=_*o;for(y=0;y<o;y++){f=x+y<<2;var k=3*(A=n[U+(y>>3)]>>7-((7&y)<<0)&1);h[f]=F[k],h[f+1]=F[k+1],h[f+2]=F[k+2],h[f+3]=A<B?z[A]:255}}if(I==2)for(_=0;_<r;_++)for(U=_*S,x=_*o,y=0;y<o;y++)f=x+y<<2,k=3*(A=n[U+(y>>2)]>>6-((3&y)<<1)&3),h[f]=F[k],h[f+1]=F[k+1],h[f+2]=F[k+2],h[f+3]=A<B?z[A]:255;if(I==4)for(_=0;_<r;_++)for(U=_*S,x=_*o,y=0;y<o;y++)f=x+y<<2,k=3*(A=n[U+(y>>1)]>>4-((1&y)<<2)&15),h[f]=F[k],h[f+1]=F[k+1],h[f+2]=F[k+2],h[f+3]=A<B?z[A]:255;if(I==8)for(y=0;y<p;y++){var A;f=y<<2,k=3*(A=n[y]),h[f]=F[k],h[f+1]=F[k+1],h[f+2]=F[k+2],h[f+3]=A<B?z[A]:255}}else if(E==4){if(I==8)for(y=0;y<p;y++){f=y<<2;var M=n[d=y<<1];h[f]=M,h[f+1]=M,h[f+2]=M,h[f+3]=n[d+1]}if(I==16)for(y=0;y<p;y++){var d;f=y<<2,M=n[d=y<<2],h[f]=M,h[f+1]=M,h[f+2]=M,h[f+3]=n[d+2]}}else if(E==0)for(c=i.tabs.tRNS?i.tabs.tRNS:-1,_=0;_<r;_++){const F=_*S,z=_*o;if(I==1)for(var l=0;l<o;l++){var O=(M=255*(n[F+(l>>>3)]>>>7-(7&l)&1))==255*c?0:255;L[z+l]=O<<24|M<<16|M<<8|M}else if(I==2)for(l=0;l<o;l++)O=(M=85*(n[F+(l>>>2)]>>>6-((3&l)<<1)&3))==85*c?0:255,L[z+l]=O<<24|M<<16|M<<8|M;else if(I==4)for(l=0;l<o;l++)O=(M=17*(n[F+(l>>>1)]>>>4-((1&l)<<2)&15))==17*c?0:255,L[z+l]=O<<24|M<<16|M<<8|M;else if(I==8)for(l=0;l<o;l++)O=(M=n[F+l])==c?0:255,L[z+l]=O<<24|M<<16|M<<8|M;else if(I==16)for(l=0;l<o;l++)M=n[F+(l<<1)],O=$(n,F+(l<<1))==c?0:255,L[z+l]=O<<24|M<<16|M<<8|M}return h}function C(n,o,r,i){const p=t(n),w=Math.ceil(r*p/8),S=new Uint8Array((w+1+n.interlace)*i);return o=n.tabs.CgBI?e(o,S):u(o,S),n.interlace==0?o=s(o,n,0,r,i):n.interlace==1&&(o=function(L,E){const I=E.width,$=E.height,y=t(E),R=y>>3,c=Math.ceil(I*y/8),f=new Uint8Array($*c);let _=0;const U=[0,0,4,0,2,0,1],x=[0,4,0,2,0,1,0],k=[8,8,8,4,4,2,2],A=[8,8,4,4,2,2,1];let M=0;for(;M<7;){const l=k[M],O=A[M];let F=0,z=0,B=U[M];for(;B<$;)B+=l,z++;let D=x[M];for(;D<I;)D+=O,F++;const H=Math.ceil(F*y/8);s(L,E,_,F,z);let P=0,T=U[M];for(;T<$;){let W=x[M],Y=_+P*H<<3;for(;W<I;){var d;if(y==1&&(d=(d=L[Y>>3])>>7-(7&Y)&1,f[T*c+(W>>3)]|=d<<7-((7&W)<<0)),y==2&&(d=(d=L[Y>>3])>>6-(7&Y)&3,f[T*c+(W>>2)]|=d<<6-((3&W)<<1)),y==4&&(d=(d=L[Y>>3])>>4-(7&Y)&15,f[T*c+(W>>1)]|=d<<4-((1&W)<<2)),y>=8){const Z=T*c+W*R;for(let V=0;V<R;V++)f[Z+V]=L[(Y>>3)+V]}Y+=y,W+=O}P++,T+=l}F*z!=0&&(_+=z*(1+H)),M+=1}return f}(o,n)),o}function u(n,o){return e(new Uint8Array(n.buffer,2,n.length-6),o)}var e=function(){const n={H:{}};return n.H.N=function(o,r){const i=Uint8Array;let p,w,S=0,h=0,L=0,E=0,I=0,$=0,y=0,R=0,c=0;if(o[0]==3&&o[1]==0)return r||new i(0);const f=n.H,_=f.b,U=f.e,x=f.R,k=f.n,A=f.A,M=f.Z,d=f.m,l=r==null;for(l&&(r=new i(o.length>>>2<<5));S==0;)if(S=_(o,c,1),h=_(o,c+1,2),c+=3,h!=0){if(l&&(r=n.H.W(r,R+(1<<17))),h==1&&(p=d.J,w=d.h,$=511,y=31),h==2){L=U(o,c,5)+257,E=U(o,c+5,5)+1,I=U(o,c+10,4)+4,c+=14;let F=1;for(var O=0;O<38;O+=2)d.Q[O]=0,d.Q[O+1]=0;for(O=0;O<I;O++){const D=U(o,c+3*O,3);d.Q[1+(d.X[O]<<1)]=D,D>F&&(F=D)}c+=3*I,k(d.Q,F),A(d.Q,F,d.u),p=d.w,w=d.d,c=x(d.u,(1<<F)-1,L+E,o,c,d.v);const z=f.V(d.v,0,L,d.C);$=(1<<z)-1;const B=f.V(d.v,L,E,d.D);y=(1<<B)-1,k(d.C,z),A(d.C,z,p),k(d.D,B),A(d.D,B,w)}for(;;){const F=p[M(o,c)&$];c+=15&F;const z=F>>>4;if(!(z>>>8))r[R++]=z;else{if(z==256)break;{let B=R+z-254;if(z>264){const W=d.q[z-257];B=R+(W>>>3)+U(o,c,7&W),c+=7&W}const D=w[M(o,c)&y];c+=15&D;const H=D>>>4,P=d.c[H],T=(P>>>4)+_(o,c,15&P);for(c+=15&P;R<B;)r[R]=r[R++-T],r[R]=r[R++-T],r[R]=r[R++-T],r[R]=r[R++-T];R=B}}}}else{7&c&&(c+=8-(7&c));const F=4+(c>>>3),z=o[F-4]|o[F-3]<<8;l&&(r=n.H.W(r,R+z)),r.set(new i(o.buffer,o.byteOffset+F,z),R),c=F+z<<3,R+=z}return r.length==R?r:r.slice(0,R)},n.H.W=function(o,r){const i=o.length;if(r<=i)return o;const p=new Uint8Array(i<<1);return p.set(o,0),p},n.H.R=function(o,r,i,p,w,S){const h=n.H.e,L=n.H.Z;let E=0;for(;E<i;){const I=o[L(p,w)&r];w+=15&I;const $=I>>>4;if($<=15)S[E]=$,E++;else{let y=0,R=0;$==16?(R=3+h(p,w,2),w+=2,y=S[E-1]):$==17?(R=3+h(p,w,3),w+=3):$==18&&(R=11+h(p,w,7),w+=7);const c=E+R;for(;E<c;)S[E]=y,E++}}return w},n.H.V=function(o,r,i,p){let w=0,S=0;const h=p.length>>>1;for(;S<i;){const L=o[S+r];p[S<<1]=0,p[1+(S<<1)]=L,L>w&&(w=L),S++}for(;S<h;)p[S<<1]=0,p[1+(S<<1)]=0,S++;return w},n.H.n=function(o,r){const i=n.H.m,p=o.length;let w,S,h,L;const E=i.j;for(var I=0;I<=r;I++)E[I]=0;for(I=1;I<p;I+=2)E[o[I]]++;const $=i.K;for(w=0,E[0]=0,S=1;S<=r;S++)w=w+E[S-1]<<1,$[S]=w;for(h=0;h<p;h+=2)L=o[h+1],L!=0&&(o[h]=$[L],$[L]++)},n.H.A=function(o,r,i){const p=o.length,w=n.H.m.r;for(let S=0;S<p;S+=2)if(o[S+1]!=0){const h=S>>1,L=o[S+1],E=h<<4|L,I=r-L;let $=o[S]<<I;const y=$+(1<<I);for(;$!=y;)i[w[$]>>>15-r]=E,$++}},n.H.l=function(o,r){const i=n.H.m.r,p=15-r;for(let w=0;w<o.length;w+=2){const S=o[w]<<r-o[w+1];o[w]=i[S]>>>p}},n.H.M=function(o,r,i){i<<=7&r;const p=r>>>3;o[p]|=i,o[p+1]|=i>>>8},n.H.I=function(o,r,i){i<<=7&r;const p=r>>>3;o[p]|=i,o[p+1]|=i>>>8,o[p+2]|=i>>>16},n.H.e=function(o,r,i){return(o[r>>>3]|o[1+(r>>>3)]<<8)>>>(7&r)&(1<<i)-1},n.H.b=function(o,r,i){return(o[r>>>3]|o[1+(r>>>3)]<<8|o[2+(r>>>3)]<<16)>>>(7&r)&(1<<i)-1},n.H.Z=function(o,r){return(o[r>>>3]|o[1+(r>>>3)]<<8|o[2+(r>>>3)]<<16)>>>(7&r)},n.H.i=function(o,r){return(o[r>>>3]|o[1+(r>>>3)]<<8|o[2+(r>>>3)]<<16|o[3+(r>>>3)]<<24)>>>(7&r)},n.H.m=function(){const o=Uint16Array,r=Uint32Array;return{K:new o(16),j:new o(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new o(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new r(32),J:new o(512),_:[],h:new o(32),$:[],w:new o(32768),C:[],v:[],d:new o(32768),D:[],u:new o(512),Q:[],r:new o(32768),s:new r(286),Y:new r(30),a:new r(19),t:new r(15e3),k:new o(65536),g:new o(32768)}}(),function(){const o=n.H.m;for(var r=0;r<32768;r++){let p=r;p=(2863311530&p)>>>1|(1431655765&p)<<1,p=(3435973836&p)>>>2|(858993459&p)<<2,p=(4042322160&p)>>>4|(252645135&p)<<4,p=(4278255360&p)>>>8|(16711935&p)<<8,o.r[r]=(p>>>16|p<<16)>>>17}function i(p,w,S){for(;w--!=0;)p.push(0,S)}for(r=0;r<32;r++)o.q[r]=o.S[r]<<3|o.T[r],o.c[r]=o.p[r]<<4|o.z[r];i(o._,144,8),i(o._,112,9),i(o._,24,7),i(o._,8,8),n.H.n(o._,9),n.H.A(o._,9,o.J),n.H.l(o._,9),i(o.$,32,5),n.H.n(o.$,5),n.H.A(o.$,5,o.h),n.H.l(o.$,5),i(o.Q,19,0),i(o.C,286,0),i(o.D,30,0),i(o.v,320,0)}(),n.H.N}();function t(n){return[1,null,3,1,2,null,4][n.ctype]*n.depth}function s(n,o,r,i,p){let w=t(o);const S=Math.ceil(i*w/8);let h,L;w=Math.ceil(w/8);let E=n[r],I=0;if(E>1&&(n[r]=[0,0,1][E-2]),E==3)for(I=w;I<S;I++)n[I+1]=n[I+1]+(n[I+1-w]>>>1)&255;for(let $=0;$<p;$++)if(h=r+$*S,L=h+$+1,E=n[L-1],I=0,E==0)for(;I<S;I++)n[h+I]=n[L+I];else if(E==1){for(;I<w;I++)n[h+I]=n[L+I];for(;I<S;I++)n[h+I]=n[L+I]+n[h+I-w]}else if(E==2)for(;I<S;I++)n[h+I]=n[L+I]+n[h+I-S];else if(E==3){for(;I<w;I++)n[h+I]=n[L+I]+(n[h+I-S]>>>1);for(;I<S;I++)n[h+I]=n[L+I]+(n[h+I-S]+n[h+I-w]>>>1)}else{for(;I<w;I++)n[h+I]=n[L+I]+a(0,n[h+I-S],0);for(;I<S;I++)n[h+I]=n[L+I]+a(n[h+I-w],n[h+I-S],n[h+I-w-S])}return n}function a(n,o,r){const i=n+o-r,p=i-n,w=i-o,S=i-r;return p*p<=w*w&&p*p<=S*S?n:w*w<=S*S?o:r}function g(n,o,r){r.width=m.readUint(n,o),o+=4,r.height=m.readUint(n,o),o+=4,r.depth=n[o],o++,r.ctype=n[o],o++,r.compress=n[o],o++,r.filter=n[o],o++,r.interlace=n[o],o++}function v(n,o,r,i,p,w,S,h,L){const E=Math.min(o,p),I=Math.min(r,w);let $=0,y=0;for(let M=0;M<I;M++)for(let d=0;d<E;d++)if(S>=0&&h>=0?($=M*o+d<<2,y=(h+M)*p+S+d<<2):($=(-h+M)*o-S+d<<2,y=M*p+d<<2),L==0)i[y]=n[$],i[y+1]=n[$+1],i[y+2]=n[$+2],i[y+3]=n[$+3];else if(L==1){var R=n[$+3]*.00392156862745098,c=n[$]*R,f=n[$+1]*R,_=n[$+2]*R,U=i[y+3]*(1/255),x=i[y]*U,k=i[y+1]*U,A=i[y+2]*U;const l=1-R,O=R+U*l,F=O==0?0:1/O;i[y+3]=255*O,i[y+0]=(c+x*l)*F,i[y+1]=(f+k*l)*F,i[y+2]=(_+A*l)*F}else if(L==2)R=n[$+3],c=n[$],f=n[$+1],_=n[$+2],U=i[y+3],x=i[y],k=i[y+1],A=i[y+2],R==U&&c==x&&f==k&&_==A?(i[y]=0,i[y+1]=0,i[y+2]=0,i[y+3]=0):(i[y]=c,i[y+1]=f,i[y+2]=_,i[y+3]=R);else if(L==3){if(R=n[$+3],c=n[$],f=n[$+1],_=n[$+2],U=i[y+3],x=i[y],k=i[y+1],A=i[y+2],R==U&&c==x&&f==k&&_==A)continue;if(R<220&&U>20)return!1}return!0}return{decode:function(o){const r=new Uint8Array(o);let i=8;const p=m,w=p.readUshort,S=p.readUint,h={tabs:{},frames:[]},L=new Uint8Array(r.length);let E,I=0,$=0;const y=[137,80,78,71,13,10,26,10];for(var R=0;R<8;R++)if(r[R]!=y[R])throw"The input is not a PNG file!";for(;i<r.length;){const M=p.readUint(r,i);i+=4;const d=p.readASCII(r,i,4);if(i+=4,d=="IHDR")g(r,i,h);else if(d=="iCCP"){for(var c=i;r[c]!=0;)c++;p.readASCII(r,i,c-i),r[c+1];const l=r.slice(c+2,i+M);let O=null;try{O=u(l)}catch{O=e(l)}h.tabs[d]=O}else if(d=="CgBI")h.tabs[d]=r.slice(i,i+4);else if(d=="IDAT"){for(R=0;R<M;R++)L[I+R]=r[i+R];I+=M}else if(d=="acTL")h.tabs[d]={num_frames:S(r,i),num_plays:S(r,i+4)},E=new Uint8Array(r.length);else if(d=="fcTL"){$!=0&&((A=h.frames[h.frames.length-1]).data=C(h,E.slice(0,$),A.rect.width,A.rect.height),$=0);const l={x:S(r,i+12),y:S(r,i+16),width:S(r,i+4),height:S(r,i+8)};let O=w(r,i+22);O=w(r,i+20)/(O==0?100:O);const F={rect:l,delay:Math.round(1e3*O),dispose:r[i+24],blend:r[i+25]};h.frames.push(F)}else if(d=="fdAT"){for(R=0;R<M-4;R++)E[$+R]=r[i+R+4];$+=M-4}else if(d=="pHYs")h.tabs[d]=[p.readUint(r,i),p.readUint(r,i+4),r[i+8]];else if(d=="cHRM")for(h.tabs[d]=[],R=0;R<8;R++)h.tabs[d].push(p.readUint(r,i+4*R));else if(d=="tEXt"||d=="zTXt"){h.tabs[d]==null&&(h.tabs[d]={});var f=p.nextZero(r,i),_=p.readASCII(r,i,f-i),U=i+M-f-1;if(d=="tEXt")k=p.readASCII(r,f+1,U);else{var x=u(r.slice(f+2,f+2+U));k=p.readUTF8(x,0,x.length)}h.tabs[d][_]=k}else if(d=="iTXt"){h.tabs[d]==null&&(h.tabs[d]={}),f=0,c=i,f=p.nextZero(r,c),_=p.readASCII(r,c,f-c);const l=r[c=f+1];var k;r[c+1],c+=2,f=p.nextZero(r,c),p.readASCII(r,c,f-c),c=f+1,f=p.nextZero(r,c),p.readUTF8(r,c,f-c),U=M-((c=f+1)-i),l==0?k=p.readUTF8(r,c,U):(x=u(r.slice(c,c+U)),k=p.readUTF8(x,0,x.length)),h.tabs[d][_]=k}else if(d=="PLTE")h.tabs[d]=p.readBytes(r,i,M);else if(d=="hIST"){const l=h.tabs.PLTE.length/3;for(h.tabs[d]=[],R=0;R<l;R++)h.tabs[d].push(w(r,i+2*R))}else if(d=="tRNS")h.ctype==3?h.tabs[d]=p.readBytes(r,i,M):h.ctype==0?h.tabs[d]=w(r,i):h.ctype==2&&(h.tabs[d]=[w(r,i),w(r,i+2),w(r,i+4)]);else if(d=="gAMA")h.tabs[d]=p.readUint(r,i)/1e5;else if(d=="sRGB")h.tabs[d]=r[i];else if(d=="bKGD")h.ctype==0||h.ctype==4?h.tabs[d]=[w(r,i)]:h.ctype==2||h.ctype==6?h.tabs[d]=[w(r,i),w(r,i+2),w(r,i+4)]:h.ctype==3&&(h.tabs[d]=r[i]);else if(d=="IEND")break;i+=M,p.readUint(r,i),i+=4}var A;return $!=0&&((A=h.frames[h.frames.length-1]).data=C(h,E.slice(0,$),A.rect.width,A.rect.height)),h.data=C(h,L,h.width,h.height),delete h.compress,delete h.interlace,delete h.filter,h},toRGBA8:function(o){const r=o.width,i=o.height;if(o.tabs.acTL==null)return[b(o.data,r,i,o).buffer];const p=[];o.frames[0].data==null&&(o.frames[0].data=o.data);const w=r*i*4,S=new Uint8Array(w),h=new Uint8Array(w),L=new Uint8Array(w);for(let I=0;I<o.frames.length;I++){const $=o.frames[I],y=$.rect.x,R=$.rect.y,c=$.rect.width,f=$.rect.height,_=b($.data,c,f,o);if(I!=0)for(var E=0;E<w;E++)L[E]=S[E];if($.blend==0?v(_,c,f,S,r,i,y,R,0):$.blend==1&&v(_,c,f,S,r,i,y,R,1),p.push(S.buffer.slice(0)),$.dispose!=0){if($.dispose==1)v(h,c,f,S,r,i,y,R,0);else if($.dispose==2)for(E=0;E<w;E++)S[E]=L[E]}}return p},_paeth:a,_copyTile:v,_bin:m}}();(function(){const{_copyTile:m}=we,{_bin:b}=we,C=we._paeth;var u={table:function(){const c=new Uint32Array(256);for(let f=0;f<256;f++){let _=f;for(let U=0;U<8;U++)1&_?_=3988292384^_>>>1:_>>>=1;c[f]=_}return c}(),update(c,f,_,U){for(let x=0;x<U;x++)c=u.table[255&(c^f[_+x])]^c>>>8;return c},crc:(c,f,_)=>4294967295^u.update(4294967295,c,f,_)};function e(c,f,_,U){f[_]+=c[0]*U>>4,f[_+1]+=c[1]*U>>4,f[_+2]+=c[2]*U>>4,f[_+3]+=c[3]*U>>4}function t(c){return Math.max(0,Math.min(255,c))}function s(c,f){const _=c[0]-f[0],U=c[1]-f[1],x=c[2]-f[2],k=c[3]-f[3];return _*_+U*U+x*x+k*k}function a(c,f,_,U,x,k,A){A==null&&(A=1);const M=U.length,d=[];for(var l=0;l<M;l++){const T=U[l];d.push([T>>>0&255,T>>>8&255,T>>>16&255,T>>>24&255])}for(l=0;l<M;l++){let T=4294967295;for(var O=0,F=0;F<M;F++){var z=s(d[l],d[F]);F!=l&&z<T&&(T=z,O=F)}}const B=new Uint32Array(x.buffer),D=new Int16Array(f*_*4),H=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(l=0;l<H.length;l++)H[l]=255*((H[l]+.5)/16-.5);for(let T=0;T<_;T++)for(let W=0;W<f;W++){var P;l=4*(T*f+W),A!=2?P=[t(c[l]+D[l]),t(c[l+1]+D[l+1]),t(c[l+2]+D[l+2]),t(c[l+3]+D[l+3])]:(z=H[4*(3&T)+(3&W)],P=[t(c[l]+z),t(c[l+1]+z),t(c[l+2]+z),t(c[l+3]+z)]),O=0;let Y=16777215;for(F=0;F<M;F++){const q=s(P,d[F]);q<Y&&(Y=q,O=F)}const Z=d[O],V=[P[0]-Z[0],P[1]-Z[1],P[2]-Z[2],P[3]-Z[3]];A==1&&(W!=f-1&&e(V,D,l+4,7),T!=_-1&&(W!=0&&e(V,D,l+4*f-4,3),e(V,D,l+4*f,5),W!=f-1&&e(V,D,l+4*f+4,1))),k[l>>2]=O,B[l>>2]=U[O]}}function g(c,f,_,U,x){x==null&&(x={});const{crc:k}=u,A=b.writeUint,M=b.writeUshort,d=b.writeASCII;let l=8;const O=c.frames.length>1;let F,z=!1,B=33+(O?20:0);if(x.sRGB!=null&&(B+=13),x.pHYs!=null&&(B+=21),x.iCCP!=null&&(F=pako.deflate(x.iCCP),B+=21+F.length+4),c.ctype==3){for(var D=c.plte.length,H=0;H<D;H++)c.plte[H]>>>24!=255&&(z=!0);B+=8+3*D+4+(z?8+1*D+4:0)}for(var P=0;P<c.frames.length;P++)O&&(B+=38),B+=(Z=c.frames[P]).cimg.length+12,P!=0&&(B+=4);B+=12;const T=new Uint8Array(B),W=[137,80,78,71,13,10,26,10];for(H=0;H<8;H++)T[H]=W[H];if(A(T,l,13),l+=4,d(T,l,"IHDR"),l+=4,A(T,l,f),l+=4,A(T,l,_),l+=4,T[l]=c.depth,l++,T[l]=c.ctype,l++,T[l]=0,l++,T[l]=0,l++,T[l]=0,l++,A(T,l,k(T,l-17,17)),l+=4,x.sRGB!=null&&(A(T,l,1),l+=4,d(T,l,"sRGB"),l+=4,T[l]=x.sRGB,l++,A(T,l,k(T,l-5,5)),l+=4),x.iCCP!=null){const V=13+F.length;A(T,l,V),l+=4,d(T,l,"iCCP"),l+=4,d(T,l,"ICC profile"),l+=11,l+=2,T.set(F,l),l+=F.length,A(T,l,k(T,l-(V+4),V+4)),l+=4}if(x.pHYs!=null&&(A(T,l,9),l+=4,d(T,l,"pHYs"),l+=4,A(T,l,x.pHYs[0]),l+=4,A(T,l,x.pHYs[1]),l+=4,T[l]=x.pHYs[2],l++,A(T,l,k(T,l-13,13)),l+=4),O&&(A(T,l,8),l+=4,d(T,l,"acTL"),l+=4,A(T,l,c.frames.length),l+=4,A(T,l,x.loop!=null?x.loop:0),l+=4,A(T,l,k(T,l-12,12)),l+=4),c.ctype==3){for(A(T,l,3*(D=c.plte.length)),l+=4,d(T,l,"PLTE"),l+=4,H=0;H<D;H++){const V=3*H,q=c.plte[H],ee=255&q,re=q>>>8&255,Se=q>>>16&255;T[l+V+0]=ee,T[l+V+1]=re,T[l+V+2]=Se}if(l+=3*D,A(T,l,k(T,l-3*D-4,3*D+4)),l+=4,z){for(A(T,l,D),l+=4,d(T,l,"tRNS"),l+=4,H=0;H<D;H++)T[l+H]=c.plte[H]>>>24&255;l+=D,A(T,l,k(T,l-D-4,D+4)),l+=4}}let Y=0;for(P=0;P<c.frames.length;P++){var Z=c.frames[P];O&&(A(T,l,26),l+=4,d(T,l,"fcTL"),l+=4,A(T,l,Y++),l+=4,A(T,l,Z.rect.width),l+=4,A(T,l,Z.rect.height),l+=4,A(T,l,Z.rect.x),l+=4,A(T,l,Z.rect.y),l+=4,M(T,l,U[P]),l+=2,M(T,l,1e3),l+=2,T[l]=Z.dispose,l++,T[l]=Z.blend,l++,A(T,l,k(T,l-30,30)),l+=4);const V=Z.cimg;A(T,l,(D=V.length)+(P==0?0:4)),l+=4;const q=l;d(T,l,P==0?"IDAT":"fdAT"),l+=4,P!=0&&(A(T,l,Y++),l+=4),T.set(V,l),l+=D,A(T,l,k(T,q,l-q)),l+=4}return A(T,l,0),l+=4,d(T,l,"IEND"),l+=4,A(T,l,k(T,l-4,4)),l+=4,T.buffer}function v(c,f,_){for(let U=0;U<c.frames.length;U++){const x=c.frames[U];x.rect.width;const k=x.rect.height,A=new Uint8Array(k*x.bpl+k);x.cimg=i(x.img,k,x.bpp,x.bpl,A,f,_)}}function n(c,f,_,U,x){const k=x[0],A=x[1],M=x[2],d=x[3],l=x[4],O=x[5];let F=6,z=8,B=255;for(var D=0;D<c.length;D++){const se=new Uint8Array(c[D]);for(var H=se.length,P=0;P<H;P+=4)B&=se[P+3]}const T=B!=255,W=function(X,G,ae,ce,te,me){const ne=[];for(var K=0;K<X.length;K++){const de=new Uint8Array(X[K]),be=new Uint32Array(de.buffer);var ge;let ve=0,ke=0,xe=G,Ee=ae,et=ce?1:0;if(K!=0){const Ht=me||ce||K==1||ne[K-2].dispose!=0?1:2;let tt=0,ht=1e9;for(let We=0;We<Ht;We++){var Ce=new Uint8Array(X[K-1-We]);const Bt=new Uint32Array(X[K-1-We]);let Fe=G,Me=ae,Pe=-1,Ne=-1;for(let Te=0;Te<ae;Te++)for(let Re=0;Re<G;Re++)be[le=Te*G+Re]!=Bt[le]&&(Re<Fe&&(Fe=Re),Re>Pe&&(Pe=Re),Te<Me&&(Me=Te),Te>Ne&&(Ne=Te));Pe==-1&&(Fe=Me=Pe=Ne=0),te&&((1&Fe)==1&&Fe--,(1&Me)==1&&Me--);const mt=(Pe-Fe+1)*(Ne-Me+1);mt<ht&&(ht=mt,tt=We,ve=Fe,ke=Me,xe=Pe-Fe+1,Ee=Ne-Me+1)}Ce=new Uint8Array(X[K-1-tt]),tt==1&&(ne[K-1].dispose=2),ge=new Uint8Array(xe*Ee*4),m(Ce,G,ae,ge,xe,Ee,-ve,-ke,0),et=m(de,G,ae,ge,xe,Ee,-ve,-ke,3)?1:0,et==1?r(de,G,ae,ge,{x:ve,y:ke,width:xe,height:Ee}):m(de,G,ae,ge,xe,Ee,-ve,-ke,0)}else ge=de.slice(0);ne.push({rect:{x:ve,y:ke,width:xe,height:Ee},img:ge,blend:et,dispose:0})}if(ce)for(K=0;K<ne.length;K++){if((Ie=ne[K]).blend==1)continue;const de=Ie.rect,be=ne[K-1].rect,ve=Math.min(de.x,be.x),ke=Math.min(de.y,be.y),xe={x:ve,y:ke,width:Math.max(de.x+de.width,be.x+be.width)-ve,height:Math.max(de.y+de.height,be.y+be.height)-ke};ne[K-1].dispose=1,K-1!=0&&o(X,G,ae,ne,K-1,xe,te),o(X,G,ae,ne,K,xe,te)}let Qe=0;if(X.length!=1)for(var le=0;le<ne.length;le++){var Ie;Qe+=(Ie=ne[le]).rect.width*Ie.rect.height}return ne}(c,f,_,k,A,M),Y={},Z=[],V=[];if(U!=0){const se=[];for(P=0;P<W.length;P++)se.push(W[P].img.buffer);const X=function(te){let me=0;for(var ne=0;ne<te.length;ne++)me+=te[ne].byteLength;const K=new Uint8Array(me);let ge=0;for(ne=0;ne<te.length;ne++){const Ce=new Uint8Array(te[ne]),Qe=Ce.length;for(let le=0;le<Qe;le+=4){let Ie=Ce[le],de=Ce[le+1],be=Ce[le+2];const ve=Ce[le+3];ve==0&&(Ie=de=be=0),K[ge+le]=Ie,K[ge+le+1]=de,K[ge+le+2]=be,K[ge+le+3]=ve}ge+=Qe}return K.buffer}(se),G=w(X,U);for(P=0;P<G.plte.length;P++)Z.push(G.plte[P].est.rgba);let ae=0;for(P=0;P<W.length;P++){const ce=(ee=W[P]).img.length;var q=new Uint8Array(G.inds.buffer,ae>>2,ce>>2);V.push(q);const te=new Uint8Array(G.abuf,ae,ce);O&&a(ee.img,ee.rect.width,ee.rect.height,Z,te,q),ee.img.set(te),ae+=ce}}else for(D=0;D<W.length;D++){var ee=W[D];const se=new Uint32Array(ee.img.buffer);var re=ee.rect.width;for(H=se.length,q=new Uint8Array(H),V.push(q),P=0;P<H;P++){const X=se[P];if(P!=0&&X==se[P-1])q[P]=q[P-1];else if(P>re&&X==se[P-re])q[P]=q[P-re];else{let G=Y[X];if(G==null&&(Y[X]=G=Z.length,Z.push(X),Z.length>=300))break;q[P]=G}}}const Se=Z.length;for(Se<=256&&l==0&&(z=Se<=2?1:Se<=4?2:Se<=16?4:8,z=Math.max(z,d)),D=0;D<W.length;D++){(ee=W[D]).rect.x,ee.rect.y,re=ee.rect.width;const se=ee.rect.height;let X=ee.img;new Uint32Array(X.buffer);let G=4*re,ae=4;if(Se<=256&&l==0){G=Math.ceil(z*re/8);var _e=new Uint8Array(G*se);const ce=V[D];for(let te=0;te<se;te++){P=te*G;const me=te*re;if(z==8)for(var J=0;J<re;J++)_e[P+J]=ce[me+J];else if(z==4)for(J=0;J<re;J++)_e[P+(J>>1)]|=ce[me+J]<<4-4*(1&J);else if(z==2)for(J=0;J<re;J++)_e[P+(J>>2)]|=ce[me+J]<<6-2*(3&J);else if(z==1)for(J=0;J<re;J++)_e[P+(J>>3)]|=ce[me+J]<<7-1*(7&J)}X=_e,F=3,ae=1}else if(T==0&&W.length==1){_e=new Uint8Array(re*se*3);const ce=re*se;for(P=0;P<ce;P++){const te=3*P,me=4*P;_e[te]=X[me],_e[te+1]=X[me+1],_e[te+2]=X[me+2]}X=_e,F=2,ae=3,G=3*re}ee.img=X,ee.bpl=G,ee.bpp=ae}return{ctype:F,depth:z,plte:Z,frames:W}}function o(c,f,_,U,x,k,A){const M=Uint8Array,d=Uint32Array,l=new M(c[x-1]),O=new d(c[x-1]),F=x+1<c.length?new M(c[x+1]):null,z=new M(c[x]),B=new d(z.buffer);let D=f,H=_,P=-1,T=-1;for(let Y=0;Y<k.height;Y++)for(let Z=0;Z<k.width;Z++){const V=k.x+Z,q=k.y+Y,ee=q*f+V,re=B[ee];re==0||U[x-1].dispose==0&&O[ee]==re&&(F==null||F[4*ee+3]!=0)||(V<D&&(D=V),V>P&&(P=V),q<H&&(H=q),q>T&&(T=q))}P==-1&&(D=H=P=T=0),A&&((1&D)==1&&D--,(1&H)==1&&H--),k={x:D,y:H,width:P-D+1,height:T-H+1};const W=U[x];W.rect=k,W.blend=1,W.img=new Uint8Array(k.width*k.height*4),U[x-1].dispose==0?(m(l,f,_,W.img,k.width,k.height,-k.x,-k.y,0),r(z,f,_,W.img,k)):m(z,f,_,W.img,k.width,k.height,-k.x,-k.y,0)}function r(c,f,_,U,x){m(c,f,_,U,x.width,x.height,-x.x,-x.y,2)}function i(c,f,_,U,x,k,A){const M=[];let d,l=[0,1,2,3,4];k!=-1?l=[k]:(f*U>5e5||_==1)&&(l=[0]),A&&(d={level:0});const O=Vn;for(var F=0;F<l.length;F++){for(let D=0;D<f;D++)p(x,c,D,U,_,l[F]);M.push(O.deflate(x,d))}let z,B=1e9;for(F=0;F<M.length;F++)M[F].length<B&&(z=F,B=M[F].length);return M[z]}function p(c,f,_,U,x,k){const A=_*U;let M=A+_;if(c[M]=k,M++,k==0)if(U<500)for(var d=0;d<U;d++)c[M+d]=f[A+d];else c.set(new Uint8Array(f.buffer,A,U),M);else if(k==1){for(d=0;d<x;d++)c[M+d]=f[A+d];for(d=x;d<U;d++)c[M+d]=f[A+d]-f[A+d-x]+256&255}else if(_==0){for(d=0;d<x;d++)c[M+d]=f[A+d];if(k==2)for(d=x;d<U;d++)c[M+d]=f[A+d];if(k==3)for(d=x;d<U;d++)c[M+d]=f[A+d]-(f[A+d-x]>>1)+256&255;if(k==4)for(d=x;d<U;d++)c[M+d]=f[A+d]-C(f[A+d-x],0,0)+256&255}else{if(k==2)for(d=0;d<U;d++)c[M+d]=f[A+d]+256-f[A+d-U]&255;if(k==3){for(d=0;d<x;d++)c[M+d]=f[A+d]+256-(f[A+d-U]>>1)&255;for(d=x;d<U;d++)c[M+d]=f[A+d]+256-(f[A+d-U]+f[A+d-x]>>1)&255}if(k==4){for(d=0;d<x;d++)c[M+d]=f[A+d]+256-C(0,f[A+d-U],0)&255;for(d=x;d<U;d++)c[M+d]=f[A+d]+256-C(f[A+d-x],f[A+d-U],f[A+d-x-U])&255}}}function w(c,f){const _=new Uint8Array(c),U=_.slice(0),x=new Uint32Array(U.buffer),k=S(U,f),A=k[0],M=k[1],d=_.length,l=new Uint8Array(d>>2);let O;if(_.length<2e7)for(var F=0;F<d;F+=4)O=h(A,z=_[F]*(1/255),B=_[F+1]*(1/255),D=_[F+2]*(1/255),H=_[F+3]*(1/255)),l[F>>2]=O.ind,x[F>>2]=O.est.rgba;else for(F=0;F<d;F+=4){var z=_[F]*.00392156862745098,B=_[F+1]*(1/255),D=_[F+2]*(1/255),H=_[F+3]*(1/255);for(O=A;O.left;)O=L(O.est,z,B,D,H)<=0?O.left:O.right;l[F>>2]=O.ind,x[F>>2]=O.est.rgba}return{abuf:U.buffer,inds:l,plte:M}}function S(c,f,_){_==null&&(_=1e-4);const U=new Uint32Array(c.buffer),x={i0:0,i1:c.length,bst:null,est:null,tdst:0,left:null,right:null};x.bst=$(c,x.i0,x.i1),x.est=y(x.bst);const k=[x];for(;k.length<f;){let M=0,d=0;for(var A=0;A<k.length;A++)k[A].est.L>M&&(M=k[A].est.L,d=A);if(M<_)break;const l=k[d],O=E(c,U,l.i0,l.i1,l.est.e,l.est.eMq255);if(l.i0>=O||l.i1<=O){l.est.L=0;continue}const F={i0:l.i0,i1:O,bst:null,est:null,tdst:0,left:null,right:null};F.bst=$(c,F.i0,F.i1),F.est=y(F.bst);const z={i0:O,i1:l.i1,bst:null,est:null,tdst:0,left:null,right:null};for(z.bst={R:[],m:[],N:l.bst.N-F.bst.N},A=0;A<16;A++)z.bst.R[A]=l.bst.R[A]-F.bst.R[A];for(A=0;A<4;A++)z.bst.m[A]=l.bst.m[A]-F.bst.m[A];z.est=y(z.bst),l.left=F,l.right=z,k[d]=F,k.push(z)}for(k.sort((M,d)=>d.bst.N-M.bst.N),A=0;A<k.length;A++)k[A].ind=A;return[x,k]}function h(c,f,_,U,x){if(c.left==null)return c.tdst=function(F,z,B,D,H){const P=z-F[0],T=B-F[1],W=D-F[2],Y=H-F[3];return P*P+T*T+W*W+Y*Y}(c.est.q,f,_,U,x),c;const k=L(c.est,f,_,U,x);let A=c.left,M=c.right;k>0&&(A=c.right,M=c.left);const d=h(A,f,_,U,x);if(d.tdst<=k*k)return d;const l=h(M,f,_,U,x);return l.tdst<d.tdst?l:d}function L(c,f,_,U,x){const{e:k}=c;return k[0]*f+k[1]*_+k[2]*U+k[3]*x-c.eMq}function E(c,f,_,U,x,k){for(U-=4;_<U;){for(;I(c,_,x)<=k;)_+=4;for(;I(c,U,x)>k;)U-=4;if(_>=U)break;const A=f[_>>2];f[_>>2]=f[U>>2],f[U>>2]=A,_+=4,U-=4}for(;I(c,_,x)>k;)_-=4;return _+4}function I(c,f,_){return c[f]*_[0]+c[f+1]*_[1]+c[f+2]*_[2]+c[f+3]*_[3]}function $(c,f,_){const U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],x=[0,0,0,0],k=_-f>>2;for(let A=f;A<_;A+=4){const M=c[A]*.00392156862745098,d=c[A+1]*(1/255),l=c[A+2]*(1/255),O=c[A+3]*(1/255);x[0]+=M,x[1]+=d,x[2]+=l,x[3]+=O,U[0]+=M*M,U[1]+=M*d,U[2]+=M*l,U[3]+=M*O,U[5]+=d*d,U[6]+=d*l,U[7]+=d*O,U[10]+=l*l,U[11]+=l*O,U[15]+=O*O}return U[4]=U[1],U[8]=U[2],U[9]=U[6],U[12]=U[3],U[13]=U[7],U[14]=U[11],{R:U,m:x,N:k}}function y(c){const{R:f}=c,{m:_}=c,{N:U}=c,x=_[0],k=_[1],A=_[2],M=_[3],d=U==0?0:1/U,l=[f[0]-x*x*d,f[1]-x*k*d,f[2]-x*A*d,f[3]-x*M*d,f[4]-k*x*d,f[5]-k*k*d,f[6]-k*A*d,f[7]-k*M*d,f[8]-A*x*d,f[9]-A*k*d,f[10]-A*A*d,f[11]-A*M*d,f[12]-M*x*d,f[13]-M*k*d,f[14]-M*A*d,f[15]-M*M*d],O=l,F=R;let z=[Math.random(),Math.random(),Math.random(),Math.random()],B=0,D=0;if(U!=0)for(let P=0;P<16&&(z=F.multVec(O,z),D=Math.sqrt(F.dot(z,z)),z=F.sml(1/D,z),!(P!=0&&Math.abs(D-B)<1e-9));P++)B=D;const H=[x*d,k*d,A*d,M*d];return{Cov:l,q:H,e:z,L:B,eMq255:F.dot(F.sml(255,H),z),eMq:F.dot(z,H),rgba:(Math.round(255*H[3])<<24|Math.round(255*H[2])<<16|Math.round(255*H[1])<<8|Math.round(255*H[0])<<0)>>>0}}var R={multVec:(c,f)=>[c[0]*f[0]+c[1]*f[1]+c[2]*f[2]+c[3]*f[3],c[4]*f[0]+c[5]*f[1]+c[6]*f[2]+c[7]*f[3],c[8]*f[0]+c[9]*f[1]+c[10]*f[2]+c[11]*f[3],c[12]*f[0]+c[13]*f[1]+c[14]*f[2]+c[15]*f[3]],dot:(c,f)=>c[0]*f[0]+c[1]*f[1]+c[2]*f[2]+c[3]*f[3],sml:(c,f)=>[c*f[0],c*f[1],c*f[2],c*f[3]]};we.encode=function(f,_,U,x,k,A,M){x==null&&(x=0),M==null&&(M=!1);const d=n(f,_,U,x,[!1,!1,!1,0,M,!1]);return v(d,-1),g(d,_,U,k,A)},we.encodeLL=function(f,_,U,x,k,A,M,d){const l={ctype:0+(x==1?0:2)+(k==0?0:4),depth:A,frames:[]},O=(x+k)*A,F=O*_;for(let z=0;z<f.length;z++)l.frames.push({rect:{x:0,y:0,width:_,height:U},img:new Uint8Array(f[z]),blend:0,dispose:1,bpp:Math.ceil(O/8),bpl:Math.ceil(F/8)});return v(l,0,!0),g(l,_,U,M,d)},we.encode.compress=n,we.encode.dither=a,we.quantize=w,we.quantize.getKDtree=S,we.quantize.getNearest=h})();const St={toArrayBuffer(m,b){const C=m.width,u=m.height,e=C<<2,t=m.getContext("2d").getImageData(0,0,C,u),s=new Uint32Array(t.data.buffer),a=(32*C+31)/32<<2,g=a*u,v=122+g,n=new ArrayBuffer(v),o=new DataView(n),r=1<<20;let i,p,w,S,h=r,L=0,E=0,I=0;function $(c){o.setUint16(E,c,!0),E+=2}function y(c){o.setUint32(E,c,!0),E+=4}function R(c){E+=c}$(19778),y(v),R(4),y(122),y(108),y(C),y(-u>>>0),$(1),$(32),y(3),y(g),y(2835),y(2835),R(8),y(16711680),y(65280),y(255),y(4278190080),y(1466527264),function c(){for(;L<u&&h>0;){for(S=122+L*a,i=0;i<e;)h--,p=s[I++],w=p>>>24,o.setUint32(S+i,p<<8|w),i+=4;L++}I<s.length?(h=r,setTimeout(c,St._dly)):b(n)}()},toBlob(m,b){this.toArrayBuffer(m,C=>{b(new Blob([C],{type:"image/bmp"}))})},_dly:9};var pe={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},jn={[pe.CHROME]:16384,[pe.FIREFOX]:11180,[pe.DESKTOP_SAFARI]:16384,[pe.IE]:8192,[pe.IOS]:4096,[pe.ETC]:8192};const dt=typeof window<"u",It=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Ge=dt&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Qn=(dt||It)&&(Ge&&Ge.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Et=(dt||It)&&(Ge&&Ge.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function pt(m,b,C=Date.now()){return new Promise(u=>{const e=m.split(","),t=e[0].match(/:(.*?);/)[1],s=globalThis.atob(e[1]);let a=s.length;const g=new Uint8Array(a);for(;a--;)g[a]=s.charCodeAt(a);const v=new Blob([g],{type:t});v.name=b,v.lastModified=C,u(v)})}function Tt(m){return new Promise((b,C)=>{const u=new Et;u.onload=()=>b(u.result),u.onerror=e=>C(e),u.readAsDataURL(m)})}function Rt(m){return new Promise((b,C)=>{const u=new Image;u.onload=()=>b(u),u.onerror=e=>C(e),u.src=m})}function $e(){if($e.cachedResult!==void 0)return $e.cachedResult;let m=pe.ETC;const{userAgent:b}=navigator;return/Chrom(e|ium)/i.test(b)?m=pe.CHROME:/iP(ad|od|hone)/i.test(b)&&/WebKit/i.test(b)?m=pe.IOS:/Safari/i.test(b)?m=pe.DESKTOP_SAFARI:/Firefox/i.test(b)?m=pe.FIREFOX:(/MSIE/i.test(b)||document.documentMode)&&(m=pe.IE),$e.cachedResult=m,$e.cachedResult}function Lt(m,b){const C=$e(),u=jn[C];let e=m,t=b,s=e*t;const a=e>t?t/e:e/t;for(;s>u*u;){const g=(u+e)/2,v=(u+t)/2;g<v?(t=v,e=v*a):(t=g*a,e=g),s=e*t}return{width:e,height:t}}function Je(m,b){let C,u;try{if(C=new OffscreenCanvas(m,b),u=C.getContext("2d"),u===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{C=document.createElement("canvas"),u=C.getContext("2d")}return C.width=m,C.height=b,[C,u]}function Ot(m,b){const{width:C,height:u}=Lt(m.width,m.height),[e,t]=Je(C,u);return b&&/jpe?g/.test(b)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(m,0,0,e.width,e.height),e}function Ze(){return Ze.cachedResult!==void 0||(Ze.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Ze.cachedResult}function Ke(m,b={}){return new Promise(function(C,u){let e,t;var s=function(){try{return t=Ot(e,b.fileType||m.type),C([e,t])}catch(g){return u(g)}},a=function(g){try{var v=function(n){try{throw n}catch(o){return u(o)}};try{let n;return Tt(m).then(function(o){try{return n=o,Rt(n).then(function(r){try{return e=r,function(){try{return s()}catch(i){return u(i)}}()}catch(i){return v(i)}},v)}catch(r){return v(r)}},v)}catch(n){v(n)}}catch(n){return u(n)}};try{if(Ze()||[pe.DESKTOP_SAFARI,pe.MOBILE_SAFARI].includes($e()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(m).then(function(g){try{return e=g,s()}catch{return a()}},a)}catch{a()}})}function Ye(m,b,C,u,e=1){return new Promise(function(t,s){let a;if(b==="image/png"){let v,n,o;return v=m.getContext("2d"),{data:n}=v.getImageData(0,0,m.width,m.height),o=we.encode([n.buffer],m.width,m.height,4096*e),a=new Blob([o],{type:b}),a.name=C,a.lastModified=u,g.call(this)}{let v=function(){return g.call(this)};if(b==="image/bmp")return new Promise(n=>St.toBlob(m,n)).then((function(n){try{return a=n,a.name=C,a.lastModified=u,v.call(this)}catch(o){return s(o)}}).bind(this),s);{let n=function(){return v.call(this)};if(typeof OffscreenCanvas=="function"&&m instanceof OffscreenCanvas)return m.convertToBlob({type:b,quality:e}).then((function(o){try{return a=o,a.name=C,a.lastModified=u,n.call(this)}catch(r){return s(r)}}).bind(this),s);{let o;return o=m.toDataURL(b,e),pt(o,C,u).then((function(r){try{return a=r,n.call(this)}catch(i){return s(i)}}).bind(this),s)}}}function g(){return t(a)}})}function Ue(m){m.width=0,m.height=0}function He(){return new Promise(function(m,b){let C,u,e,t;return He.cachedResult!==void 0?m(He.cachedResult):pt("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(s){try{return C=s,Ke(C).then(function(a){try{return u=a[1],Ye(u,C.type,C.name,C.lastModified).then(function(g){try{return e=g,Ue(u),Ke(e).then(function(v){try{return t=v[0],He.cachedResult=t.width===1&&t.height===2,m(He.cachedResult)}catch(n){return b(n)}},b)}catch(v){return b(v)}},b)}catch(g){return b(g)}},b)}catch(a){return b(a)}},b)})}function $t(m){return new Promise((b,C)=>{const u=new Et;u.onload=e=>{const t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return b(-2);const s=t.byteLength;let a=2;for(;a<s;){if(t.getUint16(a+2,!1)<=8)return b(-1);const g=t.getUint16(a,!1);if(a+=2,g==65505){if(t.getUint32(a+=2,!1)!=1165519206)return b(-1);const v=t.getUint16(a+=6,!1)==18761;a+=t.getUint32(a+4,v);const n=t.getUint16(a,v);a+=2;for(let o=0;o<n;o++)if(t.getUint16(a+12*o,v)==274)return b(t.getUint16(a+12*o+8,v))}else{if((65280&g)!=65280)break;a+=t.getUint16(a,!1)}}return b(-1)},u.onerror=e=>C(e),u.readAsArrayBuffer(m)})}function zt(m,b){const{width:C}=m,{height:u}=m,{maxWidthOrHeight:e}=b;let t,s=m;return isFinite(e)&&(C>e||u>e)&&([s,t]=Je(C,u),C>u?(s.width=e,s.height=u/C*e):(s.width=C/u*e,s.height=e),t.drawImage(m,0,0,s.width,s.height),Ue(m)),s}function Pt(m,b){const{width:C}=m,{height:u}=m,[e,t]=Je(C,u);switch(b>4&&b<9?(e.width=u,e.height=C):(e.width=C,e.height=u),b){case 2:t.transform(-1,0,0,1,C,0);break;case 3:t.transform(-1,0,0,-1,C,u);break;case 4:t.transform(1,0,0,-1,0,u);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,u,0);break;case 7:t.transform(0,-1,-1,0,u,C);break;case 8:t.transform(0,-1,1,0,0,C)}return t.drawImage(m,0,0,C,u),Ue(m),e}function wt(m,b,C=0){return new Promise(function(u,e){let t,s,a,g,v,n,o,r,i,p,w,S,h,L,E,I,$,y,R,c;function f(U=5){if(b.signal&&b.signal.aborted)throw b.signal.reason;t+=U,b.onProgress(Math.min(t,100))}function _(U){if(b.signal&&b.signal.aborted)throw b.signal.reason;t=Math.min(Math.max(U,t),100),b.onProgress(t)}return t=C,s=b.maxIteration||10,a=1024*b.maxSizeMB*1024,f(),Ke(m,b).then((function(U){try{return[,g]=U,f(),v=zt(g,b),f(),new Promise(function(x,k){var A;if(!(A=b.exifOrientation))return $t(m).then((function(d){try{return A=d,M.call(this)}catch(l){return k(l)}}).bind(this),k);function M(){return x(A)}return M.call(this)}).then((function(x){try{return n=x,f(),He().then((function(k){try{return o=k?v:Pt(v,n),f(),r=b.initialQuality||1,i=b.fileType||m.type,Ye(o,i,m.name,m.lastModified,r).then((function(A){try{{let d=function(){if(s--&&(E>a||E>h)){let O,F;return O=c?.95*R.width:R.width,F=c?.95*R.height:R.height,[$,y]=Je(O,F),y.drawImage(R,0,0,O,F),r*=i==="image/png"?.85:.95,Ye($,i,m.name,m.lastModified,r).then(function(z){try{return I=z,Ue(R),R=$,E=I.size,_(Math.min(99,Math.floor((L-E)/(L-a)*100))),d}catch(B){return e(B)}},e)}return[1]},l=function(){return Ue(R),Ue($),Ue(v),Ue(o),Ue(g),_(100),u(I)};if(p=A,f(),w=p.size>a,S=p.size>m.size,!w&&!S)return _(100),u(p);var M;return h=m.size,L=p.size,E=L,R=o,c=!b.alwaysKeepResolution&&w,(M=(function(O){for(;O;){if(O.then)return void O.then(M,e);try{if(O.pop){if(O.length)return O.pop()?l.call(this):O;O=d}else O=O.call(this)}catch(F){return e(F)}}}).bind(this))(d)}}catch(d){return e(d)}}).bind(this),e)}catch(A){return e(A)}}).bind(this),e)}catch(k){return e(k)}}).bind(this),e)}catch(x){return e(x)}}).bind(this),e)})}const Zn=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let rt;function qn(m,b){return new Promise((C,u)=>{rt||(rt=function(s){const a=[];return a.push(s),URL.createObjectURL(new Blob(a))}(Zn));const e=new Worker(rt);e.addEventListener("message",function(s){if(b.signal&&b.signal.aborted)e.terminate();else if(s.data.progress===void 0){if(s.data.error)return u(new Error(s.data.error)),void e.terminate();C(s.data.file),e.terminate()}else b.onProgress(s.data.progress)}),e.addEventListener("error",u),b.signal&&b.signal.addEventListener("abort",()=>{u(b.signal.reason),e.terminate()}),e.postMessage({file:m,imageCompressionLibUrl:b.libURL,options:{...b,onProgress:void 0,signal:void 0}})})}function ue(m,b){return new Promise(function(C,u){let e,t,s,a,g,v;if(e={...b},s=0,{onProgress:a}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,g=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=i=>{s=i,typeof a=="function"&&a(s)},!(m instanceof Blob||m instanceof Qn))return u(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(m.type))return u(new Error("The file given is not an image"));if(v=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!g||typeof Worker!="function"||v)return wt(m,e).then((function(i){try{return t=i,r.call(this)}catch(p){return u(p)}}).bind(this),u);var n=(function(){try{return r.call(this)}catch(i){return u(i)}}).bind(this),o=function(i){try{return wt(m,e).then(function(p){try{return t=p,n()}catch(w){return u(w)}},u)}catch(p){return u(p)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",qn(m,e).then(function(i){try{return t=i,n()}catch{return o()}},o)}catch{o()}function r(){try{t.name=m.name,t.lastModified=m.lastModified}catch{}try{e.preserveExif&&m.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===m.type)&&(t=Mt(m,t))}catch{}return C(t)}})}ue.getDataUrlFromFile=Tt,ue.getFilefromDataUrl=pt,ue.loadImage=Rt,ue.drawImageInCanvas=Ot,ue.drawFileInCanvas=Ke,ue.canvasToFile=Ye,ue.getExifOrientation=$t,ue.handleMaxWidthOrHeight=zt,ue.followExifOrientation=Pt,ue.cleanupCanvasMemory=Ue,ue.isAutoOrientationInBrowser=He,ue.approximateBelowMaximumCanvasSizeOfBrowser=Lt,ue.copyExifWithoutOrientation=Mt,ue.getBrowserName=$e,ue.version="2.0.2";async function Gn(m,b){const C=b.convertType==="none"?m.type:Kt.getType(b.convertType)||"image/jpeg";return await ue(m,{maxSizeMB:b.compressionMaxSize||void 0,maxWidthOrHeight:b.compressionMaxWidthOrHeight||void 0,useWebWorker:!0,fileType:C})}const Kn={class:"w-full"},Yn={class:"w-full flex flex-row justify-between items-center gap-2 p-3 rounded-md bg-gray-200/50 dark:bg-gray-800/80 hover:bg-gray-500/15 hover:text-primary-500 dark:hover:text-primary-400 transition-colors max-w-full cursor-default"},Xn={class:"space-x-2 max-w-full overflow-hidden whitespace-nowrap text-ellipsis"},Jn={class:"p-4 flex flex-col gap-4"},er=["src"],tr={class:"transition-all flex gap-1 flex-shrink-0"},nr={class:"flex flex-col gap-4"},rr={class:"flex content-center items-center justify-between text-sm"},or={class:"text-gray-500 dark:text-gray-400 text-sm"},ar={class:"flex flex-row gap-2 mt-1"},ir=ze({__name:"UploadPreviewBar",props:{file:{}},emits:["deleteFile"],setup(m,{expose:b}){const C=ut(),u=m,{file:e}=Yt(u),t=ye({compressionMaxSize:C.app.compressionMaxSize,compressionMaxWidthOrHeight:C.app.compressionMaxWidthOrHeight,convertType:C.app.convertType,keyTemplate:C.app.keyTemplate}),s=fe(()=>xn(e.value,{keyTemplate:t.value.keyTemplate,type:t.value.convertType})),a=Xt(null),g=fe(()=>{var p;return(p=a.value)!=null&&p.size?Hn(a.value.size):void 0}),v=async()=>{a.value=await Gn(e.value,t.value)},n=async p=>{await v(),p()};b({key:s,upload:async p=>{try{return tn("Uploaded",s.value),await v(),await new nn(C.s3).upload(a.value,s.value),p&&p(s.value,e.value.name,!0),{key:s.value,name:e.value.name,success:!0}}catch(w){return console.error(w),p&&p(s.value,e.value.name,!1),{key:s.value,name:e.value.name,success:!1}}}});const r=ye(!1),i=fe(()=>e.value?URL.createObjectURL(e.value):"");return Jt(()=>{URL.revokeObjectURL(i.value)}),(p,w)=>{const S=_t,h=Dn,L=Xe,E=rn,I=wn,$=An,y=_n,R=Ut,c=bn;return oe(),he("div",Kn,[j("div",Yn,[Q(E,{mode:"hover",class:"flex-grow min-w-0"},{panel:ie(()=>[j("div",Jn,[Q(h,{"key-str":N(s),"processed-size":N(g),onProcessFile:n},null,8,["key-str","processed-size"]),Q(L,{icon:"i-mingcute-edit-2-line",color:"white",variant:"solid",block:"",onClick:w[0]||(w[0]=f=>r.value=!0)},{default:ie(()=>w[8]||(w[8]=[xt(" Edit Config ")])),_:1}),j("img",{src:N(i),class:"w-72"},null,8,er)])]),default:ie(()=>[j("span",Xn,[Q(S,{name:"i-mingcute-pic-line",class:"align-middle -translate-y-[0.1em]"}),j("span",null,Ae(N(e).name),1)])]),_:1}),j("span",tr,[Q(L,{icon:"i-mingcute-edit-2-line",size:"sm",color:"white",variant:"solid",onClick:w[1]||(w[1]=f=>r.value=!0)}),Q(L,{size:"sm",color:"white",variant:"solid",icon:"i-heroicons-x-mark-20-solid",onClick:w[2]||(w[2]=f=>p.$emit("deleteFile"))})])]),Q(c,{modelValue:N(r),"onUpdate:modelValue":w[7]||(w[7]=f=>ft(r)?r.value=f:null)},{default:ie(()=>[Q(R,null,{default:ie(()=>[Q(h,{"key-str":N(s),"processed-size":N(g),class:"mb-4",onProcessFile:n},null,8,["key-str","processed-size"]),j("div",nr,[Q($,{label:p.$t("settings.app.keyTemplate.title")},{default:ie(()=>[Q(I,{modelValue:N(t).keyTemplate,"onUpdate:modelValue":w[3]||(w[3]=f=>N(t).keyTemplate=f)},null,8,["modelValue"])]),_:1},8,["label"]),Q($,{label:p.$t("settings.app.convert.title"),description:p.$t("settings.app.convert.description"),name:"convertType"},{default:ie(()=>[Q(y,{modelValue:N(t).convertType,"onUpdate:modelValue":w[4]||(w[4]=f=>N(t).convertType=f),options:Array.from(N(en))},null,8,["modelValue","options"])]),_:1},8,["label","description"]),j("div",null,[j("div",rr,Ae(p.$t("settings.app.compress.title")),1),j("p",or,Ae(p.$t("settings.app.compress.description")),1),j("div",ar,[Q($,{name:"compressionMaxSize",class:"w-full"},{default:ie(()=>[Q(I,{modelValue:N(t).compressionMaxSize,"onUpdate:modelValue":w[5]||(w[5]=f=>N(t).compressionMaxSize=f),placeholder:p.$t("settings.app.compress.options.maxSize.title"),type:"number",min:"0"},{trailing:ie(()=>w[9]||(w[9]=[j("span",{class:"text-gray-500 dark:text-gray-400 text-xs"},"MB",-1)])),_:1},8,["modelValue","placeholder"])]),_:1}),Q($,{name:"compressionMaxWidthOrHeight",class:"w-full"},{default:ie(()=>[Q(I,{modelValue:N(t).compressionMaxWidthOrHeight,"onUpdate:modelValue":w[6]||(w[6]=f=>N(t).compressionMaxWidthOrHeight=f),placeholder:p.$t("settings.app.compress.options.maxWidthOrHeight.title"),type:"number",min:"1"},{trailing:ie(()=>w[10]||(w[10]=[j("span",{class:"text-gray-500 dark:text-gray-400 text-xs"},"px",-1)])),_:1},8,["modelValue","placeholder"])]),_:1})])])])]),_:1})]),_:1},8,["modelValue"])])}}}),sr={class:"space-y-2"},lr={key:1,class:"space-y-2"},ur={class:"flex flex-col w-full gap-2"},fr=ze({__name:"UploadWrapper",props:{uploadedLinks:{type:Array,default:[]},uploadedLinksModifiers:{}},emits:["update:uploadedLinks"],setup(m){const{t:b}=kt(),C=ut(),u=on(),e=Ct(),t=At(m,"uploadedLinks"),s=ye(!1),a=ye([]),g=an("previewBars"),v=ye(0),n=ye(0),o=ye(!1),r=async()=>{var S;s.value=!0,n.value=a.value.length,v.value=0,o.value=!0,e.add({title:b("upload.message.uploadStarted.title"),description:b("upload.message.uploadStarted.description")});const i=((S=g.value)==null?void 0:S.map(h=>h==null?void 0:h.upload(()=>{v.value++})))??[],p=await Promise.all(i);setTimeout(()=>{o.value=!1},3e3);const w=[];p.forEach(h=>{if(h)if(h.success){const L=a.value.findIndex(E=>E.name===h.name);t.value.push({link:sn(h.key,C.s3),name:h.name}),L!==-1&&a.value.splice(L,1)}else w.push(h)}),w.length>0?e.add({title:b("upload.message.uploadFailed.title"),description:w.map(h=>h==null?void 0:h.key).join(", "),actions:[{label:b("upload.message.uploadFailed.actions.goToSettings"),click:()=>ln(u("/settings/s3"))}]}):e.add({title:b("upload.message.uploaded.title")}),s.value=!1};return(i,p)=>{const w=Sn,S=Rn,h=ir,L=Xe;return oe(),he("div",sr,[Q(w,{modelValue:N(a),"onUpdate:modelValue":p[0]||(p[0]=E=>ft(a)?a.value=E:null)},null,8,["modelValue"]),N(o)?(oe(),je(S,{key:0,value:N(v),max:N(n)},null,8,["value","max"])):Be("",!0),N(a).length!==0?(oe(),he("div",lr,[j("div",ur,[(oe(!0),he(st,null,lt(N(a),(E,I)=>(oe(),je(h,{key:E.name,ref_for:!0,ref_key:"previewBars",ref:g,class:"transition-all",file:E,onDeleteFile:()=>{N(a).splice(I,1)}},null,8,["file","onDeleteFile"]))),128))]),Q(L,{label:i.$t("upload.fileUploader.uploadButton"),variant:"outline",loading:N(s),disabled:!N(C).validity.all,block:"",onClick:r},null,8,["label","loading","disabled"])])):Be("",!0)])}}}),cr=hn?window:void 0;function dr(m){var b;const C=Ve(m);return(b=C==null?void 0:C.$el)!=null?b:C}function pr(...m){let b,C,u,e;if(typeof m[0]=="string"||Array.isArray(m[0])?([C,u,e]=m,b=cr):[b,C,u,e]=m,!b)return dn;Array.isArray(C)||(C=[C]),Array.isArray(u)||(u=[u]);const t=[],s=()=>{t.forEach(n=>n()),t.length=0},a=(n,o,r,i)=>(n.addEventListener(o,r,i),()=>n.removeEventListener(o,r,i)),g=ct(()=>[dr(b),Ve(e)],([n,o])=>{if(s(),!n)return;const r=pn(o)?{...o}:o;t.push(...C.flatMap(i=>u.map(p=>a(n,i,p,r))))},{immediate:!0,flush:"post"}),v=()=>{g(),s()};return Ft(v),v}const hr=ze({name:"UseClipboard",props:["source","read","navigator","copiedDuring","legacy"],setup(m,{slots:b}){const C=un(fn(m));return()=>{var u;return(u=b.default)==null?void 0:u.call(b,C)}}});function ot(m){return typeof Window<"u"&&m instanceof Window?m.document.documentElement:typeof Document<"u"&&m instanceof Document?m.documentElement:m}function Dt(m){const b=window.getComputedStyle(m);if(b.overflowX==="scroll"||b.overflowY==="scroll"||b.overflowX==="auto"&&m.clientWidth<m.scrollWidth||b.overflowY==="auto"&&m.clientHeight<m.scrollHeight)return!0;{const C=m.parentNode;return!C||C.tagName==="BODY"?!1:Dt(C)}}function mr(m){const b=m||window.event,C=b.target;return Dt(C)?!1:b.touches.length>1?!0:(b.preventDefault&&b.preventDefault(),!1)}const at=new WeakMap;function gr(m,b=!1){const C=ye(b);let u=null,e="";ct(cn(m),a=>{const g=ot(Ve(a));if(g){const v=g;if(at.get(v)||at.set(v,v.style.overflow),v.style.overflow!=="hidden"&&(e=v.style.overflow),v.style.overflow==="hidden")return C.value=!0;if(C.value)return v.style.overflow="hidden"}},{immediate:!0});const t=()=>{const a=ot(Ve(m));!a||C.value||(yt&&(u=pr(a,"touchmove",g=>{mr(g)},{passive:!1})),a.style.overflow="hidden",C.value=!0)},s=()=>{const a=ot(Ve(m));!a||!C.value||(yt&&(u==null||u()),a.style.overflow=e,at.delete(a),C.value=!1)};return Ft(s),fe({get(){return C.value},set(a){a?t():s()}})}function vr(){let m=!1;const b=ye(!1);return(C,u)=>{if(b.value=u.value,m)return;m=!0;const e=gr(C,u.value);ct(b,t=>e.value=t)}}vr();const yr=["aria-label"],br={class:"truncate"},kr=ze({__name:"upload",setup(m){const{t:b}=kt(),C=Ct(),u=ut();mn(()=>{u.validity.s3||(bt("s3"),console.error("Invalid S3 settings")),u.validity.app||(bt("app"),console.error("Invalid App settings"))});const e=ye([]),t=fe(()=>[{type:"pureLink",links:e.value.map(s=>s.link),label:b("upload.uploadedLinks.pureLink.title")},{type:"markdown",links:e.value.map(s=>`![${s.name}](${s.link})`),label:b("upload.uploadedLinks.markdown.title")}]);return(s,a)=>{const g=fr,v=gn,n=Xe,o=Ut,r=vn;return oe(),je(v,{class:"space-y-8 max-w-xl w-full"},{default:ie(()=>[Q(v,{class:"!px-0"},{default:ie(()=>[Q(g,{"uploaded-links":N(e),"onUpdate:uploadedLinks":a[0]||(a[0]=i=>ft(e)?e.value=i:null),class:"w-full"},null,8,["uploaded-links"])]),_:1}),N(e).length>0?(oe(),je(r,{key:0,items:N(t),"aria-label":s.$t("upload.uploadedLinks.description")},{item:ie(({item:i})=>[Q(o,null,{default:ie(()=>[j("ul",{class:"space-y-3","aria-label":s.$t(`upload.uploadedLinks.${i.type}.description`)},[(oe(!0),he(st,null,lt(i.links,p=>(oe(),he("li",{key:p},[Q(N(hr),{source:p},{default:ie(({copy:w})=>[Q(n,{color:"black",variant:"link",class:"w-full","aria-label":s.$t("upload.uploadedLinks.clickToCopy")+p,onClick:S=>w()&&N(C).add({title:s.$t("upload.message.copied")})},{default:ie(()=>[j("span",br,Ae(p),1)]),_:2},1032,["aria-label","onClick"])]),_:2},1032,["source"])]))),128))],8,yr)]),_:2},1024)]),_:1},8,["items","aria-label"])):Be("",!0)]),_:1})}}});export{kr as default};
